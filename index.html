<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flyz远征飞官方网站</title>
  <!-- 引入外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#4080FF',
            dark: '#0A0F1F'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义样式 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .bg-glass {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
      }
      .text-gradient {
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        background-image: linear-gradient(90deg, #165DFF, #4080FF);
      }
      .hover-scale {
        transition: transform 0.3s ease;
      }
      .hover-scale:hover {
        transform: scale(1.05);
      }
      .countdown-animation {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      }
      .loader-video {
        object-fit: cover;
        background: #0A0F1F;
      }
      .loading-overlay {
        transition: opacity 0.5s ease-out;
      }
      /* 设备图片旋转动画 */
      .device-img {
        width: 120px;
        height: 120px;
        object-fit: contain;
        border-radius: 10px;
        animation: rotate 10s linear infinite;
        box-shadow: 0 0 20px rgba(22, 93, 255, 0.5);
      }
      @keyframes rotate {
        0% {
          transform: rotate(0deg) scale(1);
          opacity: 0.8;
        }
        50% {
          transform: rotate(180deg) scale(1.1);
          opacity: 1;
        }
        100% {
          transform: rotate(360deg) scale(1);
          opacity: 0.8;
        }
      }
      /* 设备弹窗样式 */
      .device-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 100;
        background: rgba(10, 15, 31, 0.95);
        backdrop-filter: blur(10px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s ease;
      }
      .device-modal.active {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        text-align: center;
        max-width: 300px;
        padding: 20px;
      }
      .modal-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin: 20px 0 10px;
        color: #4080FF;
      }
      .modal-desc {
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 20px;
      }
      .close-modal {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        padding: 8px 20px;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .close-modal:hover {
        background: rgba(255, 255, 255, 0.2);
      }
    }
  </style>
</head>

<body class="font-sans bg-dark text-white min-h-screen flex items-center justify-center p-4 overflow-hidden">
  <!-- 视频加载层（开场动画） -->
  <div id="loadingOverlay" class="loading-overlay fixed inset-0 z-50 flex flex-col items-center justify-center bg-dark">
    <!-- 视频元素 -->
    <video 
      id="loaderVideo" 
      class="loader-video w-full h-full max-w-2xl max-h-2xl rounded-lg"
      autoplay 
      muted 
      playsinline
      preload="auto"
    >
      <source src="https://yzbjfpv.top/flyz/video/startvideo.mp4" type="video/mp4">
      您的设备过于老旧，请升级浏览器
    </video>
    
    <!-- 加载提示（视频加载慢时显示） -->
    <div id="loadingText" class="mt-4 text-white/70 text-lg flex items-center">
      <i class="fa fa-circle-o-notch fa-spin mr-2"></i>
      <span>Flyz远征飞服务器正在飞快加载中...</span>
    </div>
  </div>

  <!-- 设备弹窗 -->
  <div id="deviceModal" class="device-modal">
    <div class="modal-content">
      <img id="deviceImage" class="device-img mx-auto" src="" alt="设备标识">
      <h3 id="modalTitle" class="modal-title">设备欢迎</h3>
      <p id="modalDesc" class="modal-desc">感谢使用Flyz远征飞服务</p>
      <button id="closeModal" class="close-modal">
        <i class="fa fa-check mr-1"></i>继续访问
      </button>
    </div>
  </div>

  <!-- 背景装饰 -->
  <div class="fixed inset-0 z-0">
    <div class="absolute top-0 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-secondary/10 rounded-full blur-3xl"></div>
  </div>

  <!-- 主内容卡片（初始隐藏） -->
  <div id="mainContent" class="relative z-10 w-full max-w-md bg-glass rounded-2xl p-8 md:p-10 border border-white/10 shadow-xl opacity-0 transition-opacity 0.5s ease-in">
    <!-- 品牌标识 -->
    <div class="flex justify-center mb-6">
      <div class="w-20 h-20 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center">
        <i class="fa fa-paper-plane text-3xl"></i>
      </div>
    </div>
    
    <!-- 核心信息 -->
    <div class="text-center mb-6">
      <h1 class="text-[clamp(1.8rem,5vw,2.5rem)] font-bold mb-4">
        <span class="text-gradient">Flyz远征飞</span>
      </h1>
      <p class="text-xl text-white/80 mb-2">全国综合性公益航模服务网站</p>
      <p class="text-white/60 mb-4">正在进行人机安全验证</p>
      
      <!-- 标语 -->
      <p class="text-white/70 text-sm md:text-base italic">
        感谢大家一年多来的陪伴<br>
        我们将持续创造免费精致的全国综合性航模服务网站
      </p>
    </div>
    
    <!-- 更新日期 -->
    <div class="text-center text-white/50 text-sm mb-6" id="updateDate">
      更新日期: 2025年12月05日
    </div>
    
    <!-- 快速链接 -->
    <div class="text-center mb-6">
      <p class="text-white/60 text-sm mb-2">快速链接</p>
      <a href="https://yzflight.xyz" class="text-secondary hover:underline text-sm flex items-center justify-center">
        <i class="fa fa-download mr-1"></i>下载中心: https://yzflight.xyz
      </a>
    </div>
    
    <!-- 倒计时 -->
    <div class="flex justify-center mb-6">
      <div class="text-4xl font-bold text-white/90 countdown-animation" id="seconds">10</div>
      <div class="ml-2 flex items-end text-white/60 mb-1">秒后跳转</div>
    </div>
    
    <!-- 跳转按钮 -->
    <button id="redirectBtn" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-300 hover-scale mb-6">
      马上跳转新网页
    </button>
    
    <!-- 联系信息 -->
    <div class="text-center text-white/60 text-sm">
      <i class="fa fa-weixin text-secondary mr-1"></i>
      如有问题请联系: 
      <span class="text-secondary">YGWFK2024</span>
    </div>
    
    <!-- 底部备注 -->
    <div class="absolute bottom-4 left-0 right-0 text-center text-white/40 text-xs" id="redirectNote">
      即将跳转至: 
    </div>
  </div>

  <script>
    // ==========================
    // 配置参数
    // ==========================
    const targetUrl = "https://yzbjfpv.top/flyz/202512";
    const videoDuration = 3000; // 视频时长3秒（3000毫秒）
    
    // 设备相关配置
    const deviceConfigs = {
      apple: {
        image: "https://www.apple.com.cn/leadership/images/default/apple-logo-og.jpg",
        audio: "https://yzbjfpv.top/flyz/user/Appleuser.mp3",
        title: "欢迎苹果用户",
        desc: "感谢使用Apple设备访问Flyz远征飞"
      },
      android: {
        image: "https://www.img520.com/OpQQOv.jpg",
        audio: "https://yzbjfpv.top/flyz/user/Androiduser.mp3",
        title: "欢迎安卓用户",
        desc: "感谢使用Android设备访问Flyz远征飞"
      }
    };
    
    // DOM元素
    const loadingOverlay = document.getElementById('loadingOverlay');
    const loaderVideo = document.getElementById('loaderVideo');
    const loadingText = document.getElementById('loadingText');
    const mainContent = document.getElementById('mainContent');
    const secondsElement = document.getElementById('seconds');
    const redirectBtn = document.getElementById('redirectBtn');
    const updateDate = document.getElementById('updateDate');
    const redirectNote = document.getElementById('redirectNote');
    const deviceModal = document.getElementById('deviceModal');
    const deviceImage = document.getElementById('deviceImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const closeModal = document.getElementById('closeModal');
    
    // 设置当前日期
    document.addEventListener('DOMContentLoaded', () => {
      const now = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      const formattedDate = now.toLocaleDateString('zh-CN', options);
      updateDate.textContent = `更新日期: ${formattedDate}`;
      redirectNote.innerHTML = `即将跳转至: ${targetUrl}`;
    });
    
    // 视频加载处理
    loaderVideo.addEventListener('loadeddata', () => {
      loadingText.textContent = "欢迎访问Flyz远征飞官网";
    });
    
    loaderVideo.addEventListener('error', () => {
      loadingText.innerHTML = '<i class="fa fa-exclamation-triangle mr-2"></i>视频加载失败，即将进入主页';
      // 加载失败时直接跳过，3秒后显示主内容
      setTimeout(hideLoadingOverlay, 3000);
    });
    
    // 隐藏加载层并检测设备
    function hideLoadingOverlay() {
      loadingOverlay.style.opacity = 0;
      setTimeout(() => {
        loadingOverlay.style.display = 'none';
        detectDevice(); // 检测设备类型
      }, 500);
    }
    
    // 设备检测函数
    function detectDevice() {
      const userAgent = navigator.userAgent.toLowerCase();
      let deviceType = null;
      
      // 检测苹果设备（iPhone/iPad/Mac）
      if (userAgent.includes('iphone') || userAgent.includes('ipad') || userAgent.includes('macintosh')) {
        deviceType = 'apple';
      }
      // 检测安卓设备
      else if (userAgent.includes('android')) {
        deviceType = 'android';
      }
      
      // 如果是目标设备，显示弹窗和媒体
      if (deviceType && deviceConfigs[deviceType]) {
        showDeviceModal(deviceType);
      } else {
        // 其他设备直接显示主内容并开始倒计时
        mainContent.style.opacity = 1;
        startCountdown();
      }
    }
    
    // 显示设备弹窗和媒体
    function showDeviceModal(deviceType) {
      const config = deviceConfigs[deviceType];
      
      // 设置弹窗内容
      deviceImage.src = config.image;
      modalTitle.textContent = config.title;
      modalDesc.textContent = config.desc;
      
      // 创建音频元素
      const audio = new Audio(config.audio);
      audio.volume = 0.7; // 设置音量（0-1）
      
      // 显示弹窗
      deviceModal.classList.add('active');
      
      // 音频从第11秒开始播放（需要先加载音频）
      audio.addEventListener('loadedmetadata', () => {
        audio.currentTime = 11; // 设置起始播放位置
        audio.play().catch(err => {
          console.log('音频自动播放失败，可能需要用户交互:', err);
          // 若自动播放失败，点击弹窗时播放
          deviceModal.addEventListener('click', () => {
            audio.currentTime = 11;
            audio.play().catch(() => {});
          }, { once: true });
        });
      });
      
      // 加载音频
      audio.load();
      
      // 关闭弹窗
      closeModal.addEventListener('click', () => {
        deviceModal.classList.remove('active');
        audio.pause(); // 暂停音频
        setTimeout(() => {
          mainContent.style.opacity = 1;
          startCountdown();
        }, 500);
      });
      
      // 弹窗自动关闭（10秒后）
      setTimeout(() => {
        if (deviceModal.classList.contains('active')) {
          deviceModal.classList.remove('active');
          audio.pause();
          setTimeout(() => {
            mainContent.style.opacity = 1;
            startCountdown();
          }, 500);
        }
      }, 10000);
    }
    
    // 监听视频播放结束
    loaderVideo.addEventListener('ended', hideLoadingOverlay);
    
    // 超时处理（防止视频加载过慢）
    setTimeout(() => {
      if (loadingOverlay.style.display !== 'none') {
        hideLoadingOverlay();
      }
    }, videoDuration + 2000); // 视频时长+2秒超时
    
    // 倒计时功能
    let countdownSeconds = 10;
    let countdownInterval;
    
    function startCountdown() {
      updateCountdownDisplay();
      countdownInterval = setInterval(updateCountdownDisplay, 1000);
    }
    
    function updateCountdownDisplay() {
      secondsElement.classList.add('scale-125', 'opacity-70', 'text-secondary');
      
      setTimeout(() => {
        secondsElement.textContent = countdownSeconds;
        secondsElement.classList.remove('scale-125', 'opacity-70', 'text-secondary');
      }, 150);
      
      if (countdownSeconds <= 0) {
        clearInterval(countdownInterval);
        window.location.href = targetUrl;
        return;
      }
      
      countdownSeconds--;
    }
    
    // 立即跳转按钮
    redirectBtn.addEventListener('click', () => {
      clearInterval(countdownInterval);
      window.location.href = targetUrl;
    });
  </script>
</body>
</html>
