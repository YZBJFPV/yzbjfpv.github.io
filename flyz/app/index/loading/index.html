<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flyz远征飞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* 全屏容器 */
        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: "PingFang SC", "Microsoft Yahei", sans-serif;
        }

        /* 开屏主容器 */
        .splash-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #2d2d2d 100%);
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* 全屏广告背景 */
        .ad-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            object-fit: cover;
            opacity: 0.85;
        }

        /* 广告位占位提示 */
        .ad-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #ccc;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .ad-placeholder:hover {
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        /* 内容层（logo、文字等） */
        .content-layer {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 0 20px;
        }

        /* Logo样式 */
        .app-logo {
            width: 120px;
            height: 120px;
            border-radius: 24px;
            margin-bottom: 24px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.5s ease;
        }
        .app-logo:hover {
            transform: scale(1.05);
        }

        /* 标题样式 */
        .app-title {
            font-size: 28px;
            margin-bottom: 8px;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
            letter-spacing: 1px;
            font-weight: 600;
        }
        .app-subtitle {
            font-size: 16px;
            color: #e0e0e0;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        /* 使用天数提示 */
        .usage-days {
            font-size: 14px;
            color: #a0a0a0;
            margin-bottom: 30px;
            text-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
        }

        /* 倒计时容器（完全隐藏） */
        .countdown {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            /* 完全透明隐藏，保留点击区域 */
            opacity: 0;
            cursor: pointer;
            z-index: 2;
        }

        /* 弹幕容器 */
        .barrage-container {
            position: absolute;
            bottom: 100px;
            left: 0;
            width: 100%;
            height: 40px;
            overflow: hidden;
            z-index: 2;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* 弹幕样式 */
        .barrage-item {
            position: absolute;
            top: 0;
            height: 40px;
            line-height: 40px;
            white-space: nowrap;
            color: #fff;
            font-size: 16px;
            text-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
            padding: 0 10px;
            animation: barrage linear infinite;
        }

        /* 弹幕动画 */
        @keyframes barrage {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }

        /* 隐私政策容器（底部固定） */
        .privacy-container {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            z-index: 3;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .privacy-wrap {
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 10px 20px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* 复选框样式 */
        .privacy-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            appearance: none;
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        .privacy-checkbox:checked {
            background: #007bff;
            border-color: #007bff;
        }
        .privacy-checkbox:checked::after {
            content: "✓";
            position: absolute;
            color: #fff;
            font-size: 14px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        /* 隐私政策文字 */
        .privacy-text {
            font-size: 14px;
            color: #e0e0e0;
        }
        .privacy-link {
            color: #40a9ff;
            text-decoration: underline;
            cursor: pointer;
            margin: 0 4px;
            transition: color 0.2s ease;
        }
        .privacy-link:hover {
            color: #69b7ff;
        }

        /* 隐私政策详情弹窗 */
        .privacy-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .privacy-modal.show {
            display: flex;
        }
        /* 弹窗内容 */
        .privacy-content {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            max-width: 380px;
            width: 100%;
            color: #333;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .privacy-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .privacy-close::before, .privacy-close::after {
            content: "";
            position: absolute;
            width: 2px;
            height: 16px;
            background: #999;
        }
        .privacy-close::before {
            transform: rotate(45deg);
        }
        .privacy-close::after {
            transform: rotate(-45deg);
        }
        .privacy-close:hover::before, .privacy-close:hover::after {
            background: #333;
        }
        .privacy-title {
            font-size: 22px;
            text-align: center;
            margin-bottom: 20px;
            color: #1a1a1a;
            font-weight: 600;
        }
        .privacy-detail {
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 20px;
            max-height: 60vh;
            overflow-y: auto;
            color: #444;
        }
        .privacy-detail p {
            margin-bottom: 12px;
        }
        .privacy-detail p:last-child {
            margin-bottom: 0;
        }

        /* 8秒无操作提示弹窗 */
        .reminder-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            border-radius: 12px;
            padding: 20px 24px;
            max-width: 300px;
            width: 100%;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
            z-index: 101;
            display: none;
            text-align: center;
            animation: reminderFadeIn 0.3s ease;
        }
        @keyframes reminderFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        .reminder-title {
            font-size: 18px;
            color: #333;
            margin-bottom: 12px;
            font-weight: 600;
        }
        .reminder-text {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        .reminder-btn {
            padding: 8px 24px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            background: #007bff;
            color: #fff;
            transition: all 0.2s ease;
        }
        .reminder-btn:hover {
            background: #0069d9;
            transform: scale(1.05);
        }

        /* 微信号提示 */
        .wechat-tip {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: #fff;
            padding: 24px 32px;
            border-radius: 12px;
            font-size: 26px;
            z-index: 200;
            display: none;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: wechatTipFadeIn 0.3s ease;
        }
        @keyframes wechatTipFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -40%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
    </style>
</head>
<body>
    <!-- 开屏主容器 -->
    <div class="splash-container">
        <!-- 全屏广告背景（替换src为你的广告图链接） -->
        <img class="ad-bg" id="adImage" src="" alt="广告背景">
        <!-- 广告位占位 -->
        <div class="ad-placeholder" id="adPlaceholder" style="display: none;">
            广告位招租
        </div>

        <!-- 内容层 -->
        <div class="content-layer">
            <img src="https://img520.com/UIGuUV.jpeg" alt="Flyz远征飞logo" class="app-logo">
            <h1 class="app-title">Flyz远征飞</h1>
            <p class="app-subtitle">全国综合性航模公益服务平台</p>
            <!-- 使用天数显示 -->
            <p class="usage-days" id="usageDays">欢迎使用Flyz远征飞</p>
        </div>

        <!-- 倒计时容器（完全隐藏，保留点击区域） -->
        <div class="countdown" id="countdown"></div>

        <!-- 弹幕容器 -->
        <div class="barrage-container" id="barrageContainer"></div>

        <!-- 隐私政策勾选框 -->
        <div class="privacy-container" id="privacyContainer">
            <div class="privacy-wrap">
                <input type="checkbox" class="privacy-checkbox" id="privacyCheckbox">
                <div class="privacy-text">
                    我已阅读并同意<a class="privacy-link" id="privacyLink">隐私政策</a>
                </div>
            </div>
        </div>
    </div>

    <!-- 隐私政策详情弹窗 -->
    <div class="privacy-modal" id="privacyModal">
        <div class="privacy-content">
            <div class="privacy-close" id="privacyClose"></div>
            <h2 class="privacy-title">隐私政策</h2>
            <div class="privacy-detail">
                <p>尊敬的用户，欢迎使用Flyz远征飞平台（以下简称“本平台”），本平台由Flyz远征飞团队开发和维护，旨在提供全国综合性航模公益服务。</p>
                <p><strong>1. 数据收集</strong>：本平台仅在本地浏览器存储首次使用日期、隐私政策同意状态等基础信息，不会收集您的任何个人隐私数据，所有操作均在本地完成。</p>
                <p><strong>2. 数据使用</strong>：本地存储的信息仅用于显示使用天数、记忆隐私政策同意状态，不会向任何第三方传输或泄露。</p>
                <p><strong>3. 免责声明</strong>：本平台为纯公益性质，仅提供航模相关信息服务，不承担因使用本平台产生的任何直接或间接责任，您需自行承担使用风险。</p>
                <p><strong>4. 联系方式</strong>：如有任何问题、建议或合作意向，请联系微信号：YGWFK2024</p>
                <p>点击勾选“我已阅读并同意隐私政策”，即表示您已充分理解并接受本政策的所有条款和内容。</p>
            </div>
        </div>
    </div>

    <!-- 8秒无操作提示弹窗 -->
    <div class="reminder-modal" id="reminderModal">
        <h3 class="reminder-title">温馨提示</h3>
        <p class="reminder-text">请勾选同意隐私政策以继续使用本平台</p>
        <button class="reminder-btn" id="reminderBtn">我知道了</button>
    </div>

    <!-- 微信号提示 -->
    <div class="wechat-tip" id="wechatTip">
        微信号：YGWFK2024
    </div>

    <script>
        // 核心配置
        const config = {
            countdownTime: 5, // 5秒后自动跳转
            targetUrl: "https://yzbjfpv.top/flyz/app/android/v1.0.2",
            barrageSpeed: 20, // 弹幕速度（数值越大越快）
            barrageSpacing: 250, // 弹幕间距（防止重叠）
            reminderTime: 8, // 无操作提示时间（秒）
            wechatTipDuration: 3000 // 微信号提示显示时长（毫秒）
        };

        // DOM元素获取
        const elements = {
            countdown: document.getElementById('countdown'),
            adImage: document.getElementById('adImage'),
            adPlaceholder: document.getElementById('adPlaceholder'),
            wechatTip: document.getElementById('wechatTip'),
            barrageContainer: document.getElementById('barrageContainer'),
            privacyCheckbox: document.getElementById('privacyCheckbox'),
            privacyLink: document.getElementById('privacyLink'),
            privacyModal: document.getElementById('privacyModal'),
            privacyClose: document.getElementById('privacyClose'),
            reminderModal: document.getElementById('reminderModal'),
            reminderBtn: document.getElementById('reminderBtn'),
            usageDays: document.getElementById('usageDays'),
            privacyContainer: document.getElementById('privacyContainer')
        };

        // 状态管理
        let countdownTimer = null;
        let reminderTimer = null;
        let isFirstAgree = false; // 是否是首次同意
        // 本地存储数据
        const storageKeys = {
            privacyAgreed: 'flyz_privacy_agreed',
            firstOpenDate: 'flyz_first_open_date'
        };

        // 初始化
        init();

        function init() {
            // 初始化本地存储（记录首次打开日期）
            initFirstOpenDate();
            // 计算并显示使用天数
            showUsageDays();
            
            // 广告图加载处理
            elements.adImage.onload = () => elements.adPlaceholder.style.display = 'none';
            elements.adImage.onerror = () => {
                elements.adImage.style.display = 'none';
                elements.adPlaceholder.style.display = 'flex';
            };

            // 广告位点击显示微信号
            elements.adPlaceholder.addEventListener('click', showWechatTip);

            // 隐私政策链接点击
            elements.privacyLink.addEventListener('click', () => elements.privacyModal.classList.add('show'));
            elements.privacyClose.addEventListener('click', () => elements.privacyModal.classList.remove('show'));

            // 隐私政策勾选框变化
            elements.privacyCheckbox.addEventListener('change', handlePrivacyChange);

            // 隐藏的倒计时区域点击跳过
            elements.countdown.addEventListener('click', skipCountdown);

            // 提示弹窗按钮点击
            elements.reminderBtn.addEventListener('click', () => {
                elements.reminderModal.style.display = 'none';
                // 聚焦到勾选框
                elements.privacyCheckbox.focus();
            });

            // 检查是否已同意隐私政策
            const hasAgreed = localStorage.getItem(storageKeys.privacyAgreed) === 'true';
            if (hasAgreed) {
                // 已同意，隐藏隐私政策勾选框
                elements.privacyContainer.style.display = 'none';
                // 启动倒计时（后续使用保持5秒跳转）
                startCountdown();
                // 加载弹幕
                loadBarrageData();
            } else {
                // 未同意，启动8秒无操作提示
                startReminderTimer();
            }
        }

        // 初始化首次打开日期
        function initFirstOpenDate() {
            const firstOpenDate = localStorage.getItem(storageKeys.firstOpenDate);
            if (!firstOpenDate) {
                // 首次打开，记录当前日期
                const today = new Date();
                const dateStr = today.toISOString().split('T')[0]; // 格式：YYYY-MM-DD
                localStorage.setItem(storageKeys.firstOpenDate, dateStr);
            }
        }

        // 计算并显示使用天数
        function showUsageDays() {
            const firstOpenDate = localStorage.getItem(storageKeys.firstOpenDate);
            if (!firstOpenDate) return;

            // 计算天数差
            const firstDate = new Date(firstOpenDate);
            const today = new Date();
            // 忽略时间，只比较日期
            firstDate.setHours(0, 0, 0, 0);
            today.setHours(0, 0, 0, 0);
            const diffTime = today - firstDate;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            // 更新显示文本
            if (diffDays === 1) {
                elements.usageDays.textContent = `这是你使用Flyz远征飞的第1天`;
            } else if (diffDays > 1) {
                elements.usageDays.textContent = `这是你使用Flyz远征飞的第${diffDays}天`;
            } else {
                elements.usageDays.textContent = `欢迎使用Flyz远征飞`;
            }
        }

        // 显示微信号提示
        function showWechatTip() {
            elements.wechatTip.style.display = 'block';
            setTimeout(() => {
                elements.wechatTip.style.display = 'none';
            }, config.wechatTipDuration);
        }

        // 处理隐私政策勾选状态变化
        function handlePrivacyChange() {
            const isChecked = elements.privacyCheckbox.checked;
            
            if (isChecked) {
                // 勾选同意
                localStorage.setItem(storageKeys.privacyAgreed, 'true');
                // 清除提示定时器
                clearTimeout(reminderTimer);
                elements.reminderModal.style.display = 'none';
                
                // 判断是否是首次同意
                const prevAgreed = localStorage.getItem(storageKeys.privacyAgreed) === 'true' && !isFirstAgree;
                if (!prevAgreed) {
                    isFirstAgree = true;
                    // 首次同意，直接跳转
                    redirectToTarget();
                    return;
                }
                
                // 非首次同意，启动倒计时和弹幕
                elements.privacyContainer.style.display = 'none';
                startCountdown();
                loadBarrageData();
            } else {
                // 取消勾选
                localStorage.removeItem(storageKeys.privacyAgreed);
                // 暂停倒计时
                if (countdownTimer) {
                    clearInterval(countdownTimer);
                }
                // 重启提示定时器
                startReminderTimer();
            }
        }

        // 启动8秒无操作提示定时器
        function startReminderTimer() {
            clearTimeout(reminderTimer);
            reminderTimer = setTimeout(() => {
                if (!elements.privacyCheckbox.checked) {
                    elements.reminderModal.style.display = 'block';
                }
            }, config.reminderTime * 1000);
        }

        // 启动倒计时（完全隐藏，仅后台运行）
        function startCountdown() {
            let remainingTime = config.countdownTime;
            
            countdownTimer = setInterval(() => {
                remainingTime--;
                
                if (remainingTime <= 0) {
                    clearInterval(countdownTimer);
                    redirectToTarget();
                }
            }, 1000);
        }

        // 跳过倒计时（点击隐藏区域）
        function skipCountdown() {
            const hasAgreed = localStorage.getItem(storageKeys.privacyAgreed) === 'true';
            if (hasAgreed) {
                clearInterval(countdownTimer);
                redirectToTarget();
            } else {
                // 未同意则提示
                elements.reminderModal.style.display = 'block';
            }
        }

        // 跳转到目标链接
        function redirectToTarget() {
            window.location.href = config.targetUrl;
        }

        // 加载合作伙伴弹幕数据
        async function loadBarrageData() {
            try {
                const response = await fetch('https://yzbjfpv.top/flyz/app/loading/hzhb.txt');
                if (!response.ok) throw new Error('获取合作伙伴数据失败');
                
                const text = await response.text();
                const partners = text.split('\n').filter(item => item.trim() !== '');
                
                if (partners.length === 0) return;
                
                createBarrage(partners);
            } catch (error) {
                console.log('弹幕加载失败:', error);
                elements.barrageContainer.style.display = 'none';
            }
        }

        // 创建弹幕
        function createBarrage(partners) {
            const containerWidth = elements.barrageContainer.offsetWidth;
            
            partners.forEach((partner, index) => {
                const item = document.createElement('div');
                item.className = 'barrage-item';
                item.textContent = `合作伙伴：${partner.trim()}`;
                
                // 计算动画时长和延迟（确保不重叠且速度快）
                const duration = containerWidth / (config.barrageSpeed / 5);
                const delay = index * (config.barrageSpacing / config.barrageSpeed);
                
                // 设置样式
                item.style.animationDuration = `${duration}s`;
                item.style.animationDelay = `${delay}s`;
                
                elements.barrageContainer.appendChild(item);
            });
        }
    </script>
</body>
</html>
