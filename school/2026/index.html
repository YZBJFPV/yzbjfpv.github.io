<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>2026å…ƒæ—¦è”æ¬¢ä¼š - ä¹å¹´çº§å…­ç­</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style type="text/css">
        :root {
            --red-deep: #8B0000;    
            --red-medium: #B22222;  
            --gold-main: #FFD700;   
            --gold-light: #FFED4F;  
            --gold-dark: #FFA500;   
            --gold-shadow: #FF8C00;

            --font-title: "Ma Shan Zheng", "Noto Serif SC", "å®‹ä½“", serif;
            --font-number: "Oswald", "Consolas", "Monaco", sans-serif;
            --font-text: "Noto Serif SC", "æ¥·ä½“", serif;
            
            --font-weight-heavy: 900;
            --font-weight-bold: 700;
            --font-weight-regular: 400;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        body {
            overflow: hidden;
            position: relative;
            font-family: var(--font-text);
            color: var(--gold-main);
            background: linear-gradient(135deg, var(--red-deep) 0%, var(--red-medium) 50%, var(--red-deep) 100%);
        }

        #canvasBg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
        }

        /* ç¯ç¬¼ä¿ç•™ï¼ˆä¸åˆ é™¤ã€ä¸å½±å“ç½®é¡¶æ–‡å­—ï¼‰ */
        .deng-box {
            position: fixed;
            top: -40px;
            z-index: 9999; /* ä½äºç½®é¡¶æ–‡å­—ï¼Œä¸é®æŒ¡ */
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        .deng-box1 { right: 250px; }
        .deng-box2 { right: 150px; }
        .deng-box3 { right: 50px; }
        .deng-box4 { right: -50px; }
        .deng-box5 { left: 250px; }
        .deng-box6 { left: 150px; }
        .deng-box7 { left: 50px; }
        .deng-box8 { left: -50px; }

        .deng {
            position: relative;
            width: 100px;
            height: 80px;
            margin: 50px;
            background: rgba(216, 0, 15, .8);
            border-radius: 50% 50%;
            transform-origin: 50% -100px;
            animation: swing 3s infinite ease-in-out;
            box-shadow: -5px 5px 50px 4px #fa6c00;
        }
        .deng-box1 .deng { animation-duration: 2.5s; }
        .deng-box2 .deng { animation-duration: 3s; }
        .deng-box3 .deng { animation-duration: 3.5s; }
        .deng-box4 .deng { animation-duration: 2.8s; }
        .deng-box5 .deng { animation-duration: 3.2s; }
        .deng-box6 .deng { animation-duration: 2.7s; }
        .deng-box7 .deng { animation-duration: 3.3s; }
        .deng-box8 .deng { animation-duration: 2.9s; }

        .deng-a {
            width: 80px;
            height: 80px;
            background: rgba(216, 0, 15, .1);
            margin: 10px 8px 8px 8px;
            border-radius: 50% 50%;
            border: 2px solid #dc8f03;
        }
        .deng-b {
            width: 40px;
            height: 80px;
            background: rgba(216, 0, 15, .1);
            margin: -4px 8px 8px 20px;
            border-radius: 50% 50%;
            border: 2px solid #dc8f03;
        }
        .xian {
            position: absolute;
            top: -20px;
            left: 50px;
            width: 2px;
            height: 20px;
            background: #dc8f03;
        }
        .shui-a {
            position: relative;
            width: 5px;
            height: 20px;
            margin: -5px 0 0 48px;
            animation: swing 4s infinite ease-in-out;
            transform-origin: 50% -45px;
            background: orange;
            border-radius: 0 0 5px 5px;
        }
        .shui-b {
            position: absolute;
            top: 14px;
            left: -2px;
            width: 10px;
            height: 10px;
            background: #dc8f03;
            border-radius: 50%;
        }
        .shui-c {
            position: absolute;
            top: 18px;
            left: -2px;
            width: 10px;
            height: 35px;
            background: orange;
            border-radius: 0 0 0 5px;
        }
        .deng:before {
            position: absolute;
            top: -7px;
            left: 24px;
            height: 12px;
            width: 50px;
            content: " ";
            display: block;
            z-index: 1;
            border-radius: 5px 5px 0 0;
            border: solid 1px #dc8f03;
            background: linear-gradient(to right, #dc8f03, orange, #dc8f03, orange, #dc8f03);
        }
        .deng:after {
            position: absolute;
            bottom: -7px;
            left: 10px;
            height: 12px;
            width: 50px;
            content: " ";
            display: block;
            margin-left: 15px;
            border-radius: 0 0 5px 5px;
            border: solid 1px #dc8f03;
            background: linear-gradient(to right, #dc8f03, orange, #dc8f03, orange, #dc8f03);
        }
        .deng-t {
            font-family: "Ma Shan Zheng", "é»‘ä½“", Arial, sans-serif;
            font-size: 2.5rem;
            color: #ffd700;
            font-weight: 700;
            line-height: 75px;
            text-align: center;
            text-shadow: 0 0 10px #fff, 0 0 20px #ffd700;
        }
        @keyframes swing {
            0% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
            100% { transform: rotate(-10deg); }
        }

        /* æ“ä½œæç¤ºå¼¹çª— */
        .help-modal {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #8B0000, #B22222);
            border: 4px solid #FFD700;
            border-radius: 20px;
            padding: 25px 30px;
            z-index: 99999; /* ä¸ç½®é¡¶æ–‡å­—åŒçº§ï¼Œä¸é®æŒ¡æ–‡å­—æ ¸å¿ƒ */
            box-shadow: 0 0 80px rgba(255, 215, 0, 0.9);
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s ease;
            max-width: 70vh;
            overflow-y: auto;
        }
        .help-modal.show {
            opacity: 1;
            pointer-events: all;
        }
        .help-title {
            font-size: 1.8vw;
            color: #FFD700;
            font-family: "Ma Shan Zheng", serif;
            font-weight: 900;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 0 15px #FFD700;
        }
        .help-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .help-item {
            font-size: 1vw;
            color: #fff;
            font-family: "Noto Serif SC", serif;
            margin: 8px 0;
            padding: 6px 0;
            border-bottom: 1px dashed rgba(255, 215, 0, 0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .help-key {
            color: #FFD700;
            font-weight: 700;
            margin-right: 15px;
            min-width: 50px;
            text-align: center;
            background: rgba(255, 215, 0, 0.1);
            padding: 3px 8px;
            border-radius: 8px;
            margin-bottom: 5px;
        }
        .help-desc {
            flex: 1;
            line-height: 1.4;
        }

        /* æ—¶é—´è®¾ç½®å¼¹çª— */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.98), rgba(178, 34, 34, 0.98));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .modal-content {
            background: linear-gradient(135deg, var(--red-medium), var(--gold-main));
            padding: 50px 70px;
            border-radius: 24px;
            box-shadow: 0 0 100px rgba(255, 215, 0, 0.7), inset 0 0 30px rgba(255, 255, 255, 0.9);
            border: 6px solid var(--gold-main);
            text-align: center;
            animation: modal-pop 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1001;
        }
        @keyframes modal-pop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-title {
            font-size: 2.8vw;
            margin-bottom: 35px;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            text-shadow: 0 0 10px var(--gold-main), 0 0 20px var(--red-deep);
            letter-spacing: 8px;
            color: #fff;
        }
        .time-set-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-bottom: 35px;
            flex-wrap: wrap;
        }
        .time-input {
            padding: 18px 24px;
            font-size: 1.8vw;
            border: 4px solid var(--gold-main);
            border-radius: 12px;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
            color: var(--gold-main);
            font-family: var(--font-number);
            text-align: center;
            min-width: 130px;
            transition: all 0.3s ease;
        }
        .time-input:focus {
            outline: none;
            box-shadow: 0 0 30px var(--gold-main);
            transform: translateY(-2px);
        }
        .tip-text {
            font-size: 1.5vw;
            margin-bottom: 35px;
            color: #fff;
            font-family: var(--font-text);
            text-shadow: 0 0 8px var(--red-deep);
            line-height: 1.8;
            font-weight: var(--font-weight-regular);
        }
        .confirm-btn {
            padding: 18px 45px;
            font-size: 2vw;
            background: linear-gradient(135deg, var(--gold-main), var(--gold-light));
            border: none;
            border-radius: 12px;
            color: var(--red-deep);
            font-weight: var(--font-weight-bold);
            font-family: var(--font-title);
            cursor: pointer;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .confirm-btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
        .confirm-btn:active::after {
            width: 300px;
            height: 300px;
            opacity: 0;
        }
        .confirm-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 0 50px #fff, 0 0 20px var(--gold-main);
        }
        .confirm-btn:active {
            transform: scale(1.05);
        }

        /* å€’è®¡æ—¶é¡µé¢ */
        .countdown-page {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
            padding: 0 20px;
        }
        .countdown-page.show {
            opacity: 1;
        }

        .title-container {
            text-align: center;
            margin-bottom: 80px;
            position: relative;
            width: 100%;
        }
        .main-title {
            font-size: 8vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            text-shadow: 
                0 2px 4px rgba(0,0,0,0.8),
                0 0 20px var(--gold-main), 
                0 0 40px var(--gold-main);
            letter-spacing: 30px;
            margin-bottom: 30px;
            color: var(--gold-main);
            line-height: 1.2;
            position: relative;
            z-index: 2;
        }
        .sub-title {
            font-size: 3.5vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            color: #fff;
            letter-spacing: 15px;
            line-height: 1.3;
            padding: 20px 40px;
            border: 4px solid var(--gold-main);
            border-radius: 50px;
            background: rgba(139, 0, 0, 0.6);
            box-shadow: 0 0 20px var(--gold-main), inset 0 0 10px var(--gold-main);
            display: inline-block;
            z-index: 2;
            position: relative;
        }

        .countdown-container {
            display: flex;
            gap: 50px;
            margin-bottom: 60px;
            perspective: 2000px;
            z-index: 2;
            position: relative;
        }

        .countdown-item {
            text-align: center;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.9), rgba(178, 34, 34, 0.9));
            padding: 40px 50px;
            border-radius: 30px;
            border: 8px solid var(--gold-main);
            box-shadow: 
                0 0 80px rgba(255, 215, 0, 0.8), 
                inset 0 0 40px rgba(255, 215, 0, 0.3),
                0 8px 0 var(--gold-shadow);
            animation: item-pulse 4s ease-in-out infinite, item-rotate 12s ease-in-out infinite;
            transform-style: preserve-3d;
            position: relative;
            min-width: 220px;
            z-index: 2;
        }
        @keyframes item-pulse {
            0% { transform: scale(1) rotateY(0); box-shadow: 0 0 80px rgba(255, 215, 0, 0.8), inset 0 0 40px rgba(255, 215, 0, 0.3), 0 8px 0 var(--gold-shadow); }
            50% { transform: scale(1.1) rotateY(8deg); box-shadow: 0 0 120px #fff, 0 0 60px var(--gold-main), inset 0 0 50px rgba(255, 215, 0, 0.4), 0 10px 0 var(--gold-shadow); }
            100% { transform: scale(1) rotateY(0); box-shadow: 0 0 80px rgba(255, 215, 0, 0.8), inset 0 0 40px rgba(255, 215, 0, 0.3), 0 8px 0 var(--gold-shadow); }
        }
        @keyframes item-rotate {
            0% { transform: rotateY(0) rotateX(0); }
            50% { transform: rotateY(6deg) rotateX(4deg); }
            100% { transform: rotateY(0) rotateX(0); }
        }

        .countdown-number {
            font-size: 14vw;
            font-weight: var(--font-weight-heavy);
            font-family: var(--font-number);
            color: var(--gold-main);
            text-shadow: 
                0 0 30px var(--gold-main), 
                0 0 60px var(--red-deep), 
                0 0 90px var(--gold-main),
                4px 4px 0 var(--gold-shadow),
                -4px -4px 0 var(--gold-shadow);
            position: relative;
            line-height: 1;
            transform-origin: center;
            z-index: 2;
        }

        .countdown-number.flip {
            animation: flip-card 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @keyframes flip-card {
            0% { transform: rotateX(0deg); opacity: 1; }
            50% { transform: rotateX(90deg); opacity: 0.5; text-shadow: 0 0 50px var(--gold-main); }
            100% { transform: rotateX(0deg); opacity: 1; text-shadow: 0 0 30px var(--gold-main), 0 0 60px var(--red-deep), 0 0 90px var(--gold-main); }
        }

        .countdown-label {
            font-size: 2.5vw;
            margin-top: 20px;
            color: #fff;
            font-family: var(--font-text);
            font-weight: var(--font-weight-bold);
            text-shadow: 0 0 15px var(--gold-main), 1px 1px 0 var(--gold-shadow);
            letter-spacing: 10px;
            z-index: 2;
            position: relative;
        }

        .music-tip {
            display: block;
            font-size: 1.2vw;
            color: #fff;
            text-shadow: 0 0 10px var(--gold-main);
            margin-top: 20px;
            z-index: 2;
            position: relative;
        }

        /* 3ç§’å¿«é€Ÿå€’è®¡æ—¶ */
        .fast-countdown {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 900;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .fast-countdown.show {
            opacity: 1;
            pointer-events: all;
        }
        .fast-count-number {
            font-size: 30vw;
            font-family: var(--font-number);
            font-weight: var(--font-weight-heavy);
            color: var(--gold-main);
            text-shadow: 0 0 60px var(--gold-main), 0 0 120px var(--red-deep), 0 0 180px var(--gold-main), 5px 5px 0 var(--gold-shadow);
            position: relative;
            animation: fast-count-explode 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 901;
        }
        @keyframes fast-count-explode {
            0% { transform: scale(0) rotate(0) skew(0); opacity: 0; text-shadow: 0 0 0 var(--gold-main); }
            30% { transform: scale(2.5) rotate(10deg) skew(5deg); opacity: 1; text-shadow: 0 0 150px var(--gold-main); }
            70% { transform: scale(1.2) rotate(-5deg) skew(-3deg); }
            100% { transform: scale(1) rotate(0); opacity: 1; text-shadow: 0 0 60px var(--gold-main), 0 0 120px var(--red-deep), 0 0 180px var(--gold-main); }
        }

        /* ç»“æŸé¡µï¼ˆä¿ç•™åŸUIï¼Œä¸åˆ‡æ¢ï¼Œä»…æ–°å¢ç½®é¡¶æ–‡å­—ï¼‰ */
        .end-countdown-page {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 800;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
        }
        .end-countdown-page.show {
            opacity: 1;
            pointer-events: all;
        }
        .end-title {
            font-size: 10vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            color: var(--gold-main);
            text-shadow: 0 0 40px var(--gold-main), 0 0 80px var(--red-deep), 0 0 120px var(--gold-main), 4px 4px 0 var(--gold-shadow);
            letter-spacing: 25px;
            margin-bottom: 50px;
            animation: end-title-glow 4s ease-in-out infinite alternate;
            line-height: 1.2;
            z-index: 801;
            position: relative;
        }
        @keyframes end-title-glow {
            0% { text-shadow: 0 0 40px var(--gold-main), 0 0 80px var(--red-deep), 4px 4px 0 var(--gold-shadow); }
            100% { text-shadow: 0 0 80px var(--gold-main), 0 0 160px var(--red-deep), 0 0 240px var(--gold-main), 6px 6px 0 var(--gold-shadow); }
        }
        .end-subtitle {
            font-size: 5vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            color: #fff;
            text-shadow: 0 0 30px var(--gold-main), 0 0 60px var(--red-deep), 3px 3px 0 var(--gold-shadow);
            letter-spacing: 20px;
            padding: 15px 35px;
            border: 3px solid var(--gold-main);
            border-radius: 40px;
            background: rgba(139, 0, 0, 0.5);
            z-index: 801;
            position: relative;
        }

        /* ========== æ ¸å¿ƒæ–°å¢ï¼šç½®é¡¶æ–‡å­—å®¹å™¨ï¼ˆå›¾å±‚æœ€é«˜ï¼Œé»˜è®¤éšè—ï¼‰ ========== */
        .top-fixed-text {
            position: fixed; /* å›ºå®šç½®é¡¶ï¼Œä¸éšé¡µé¢å†…å®¹æ»šåŠ¨ */
            top: 0; /* ç½®é¡¶å¯¹é½ */
            left: 0;
            width: 100vw;
            height: auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 5vh; /* é¡¶éƒ¨é¢„ç•™å°‘é‡ç©ºé—´ï¼Œé¿å…å®Œå…¨è´´è¾¹ */
            z-index: 999999; /* æè‡´æœ€é«˜å±‚çº§ï¼Œä¸è¢«ä»»ä½•å…ƒç´ é®æŒ¡ */
            pointer-events: none; /* ä¸é®æŒ¡ä»»ä½•æ“ä½œï¼ˆå¦‚ç©ºæ ¼ã€Aé”®ï¼‰ */
            opacity: 0; /* é»˜è®¤éšè— */
            visibility: hidden; /* é»˜è®¤ä¸å¯è§ */
            transition: opacity 1s ease-in-out, visibility 1s ease-in-out; /* å¹³æ»‘å¼¹å‡ºè¿‡æ¸¡ */
        }

        /* æ–‡å­—æ˜¾ç¤ºç±»ï¼ˆæŒ‰ç©ºæ ¼è§¦å‘ï¼‰ */
        .top-fixed-text.show {
            opacity: 1;
            visibility: visible;
        }

        /* ç½®é¡¶ä¸»æ ‡é¢˜ï¼ˆå¤§æ°”ä¹¦æ³•ç²—å­—ï¼Œå¸¦åŠ¨æ€æ•ˆæœï¼‰ */
        .top-main-title {
            font-size: 12vw;
            min-font-size: 60px;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            letter-spacing: 40px;
            margin-bottom: 50px;
            line-height: 1.2;
            /* æµåŠ¨é‡‘è‰²æ¸å˜ */
            background: linear-gradient(90deg, var(--gold-shadow), var(--gold-main), var(--gold-light), var(--gold-main), var(--gold-shadow));
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            color: var(--gold-main); /* å›é€€è‰² */
            /* å¤šé‡åŠ¨æ€æ•ˆæœ */
            animation: 
                gold-flow 5s linear infinite,
                gold-glow 3s ease-in-out infinite alternate,
                gold-float 6s ease-in-out infinite;
            /* åšé‡é˜´å½±å¼ºåŒ–è´¨æ„Ÿ */
            text-shadow: 
                0 0 25px var(--gold-main), 
                0 0 50px var(--gold-shadow), 
                0 0 75px var(--gold-main), 
                3px 3px 0 rgba(0, 0, 0, 0.3),
                0 0 100px var(--gold-light);
        }

        /* ç½®é¡¶å‰¯æ ‡é¢˜ï¼ˆå°å­—ï¼Œå»¶è¿ŸåŠ¨ç”»ï¼‰ */
        .top-sub-title {
            font-size: 5vw;
            min-font-size: 30px;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            letter-spacing: 25px;
            /* æµåŠ¨é‡‘è‰²æ¸å˜ */
            background: linear-gradient(90deg, var(--gold-shadow), var(--gold-main), var(--gold-light));
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            color: var(--gold-main); /* å›é€€è‰² */
            /* åŠ¨æ€æ•ˆæœï¼ˆå»¶è¿Ÿï¼Œå¢åŠ å±‚æ¬¡æ„Ÿï¼‰ */
            animation: 
                gold-flow 6s linear infinite,
                gold-glow 4s ease-in-out infinite alternate,
                gold-float 7s ease-in-out infinite 0.5s;
            text-shadow: 
                0 0 15px var(--gold-main), 
                0 0 30px var(--gold-shadow), 
                0 0 45px var(--gold-main), 
                2px 2px 0 rgba(0, 0, 0, 0.2);
        }

        /* æ–‡å­—åŠ¨æ€æ•ˆæœå…³é”®å¸§ */
        @keyframes gold-flow {
            0% { background-position: 300% 0; }
            100% { background-position: 0 0; }
        }

        @keyframes gold-glow {
            0% { text-shadow: 
                0 0 25px var(--gold-main), 
                0 0 50px var(--gold-shadow), 
                0 0 75px var(--gold-main), 
                3px 3px 0 rgba(0, 0, 0, 0.3); }
            100% { text-shadow: 
                0 0 40px var(--gold-main), 
                0 0 80px var(--gold-shadow), 
                0 0 120px var(--gold-light), 
                3px 3px 0 rgba(0, 0, 0, 0.3); }
        }

        @keyframes gold-float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(1deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        /* ç²’å­/çƒŸèŠ±æ•ˆæœï¼ˆå±‚çº§ä½äºç½®é¡¶æ–‡å­—ï¼‰ */
        #fireworks, #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 701; /* ä½äºç½®é¡¶æ–‡å­— */
            pointer-events: none;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--gold-main);
            opacity: 0.8;
            border-radius: 50%;
            animation: confetti-fall linear infinite;
            z-index: 701; /* ä½äºç½®é¡¶æ–‡å­— */
            pointer-events: none;
        }
        @keyframes confetti-fall {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* å…¶ä»–å®¹å™¨ï¼ˆå±‚çº§ä½äºç½®é¡¶æ–‡å­—ï¼‰ */
        .iframe-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2000;
            display: none;
            background: #000;
        }
        .iframe-container.show {
            display: block;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: 0;
            z-index: 2001;
        }

        .volume-tip {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 1.2vw;
            color: var(--gold-main);
            text-shadow: 0 0 5px var(--red-deep);
            z-index: 100;
        }
    </style>
</head>
<body>
    <!-- CanvasèƒŒæ™¯å®¹å™¨ -->
    <canvas id="canvasBg"></canvas>

    <!-- 8ä¸ªç¯ç¬¼ï¼ˆå®Œæ•´ä¿ç•™ï¼Œä¸åˆ é™¤ï¼‰ -->
    <div class="deng-box deng-box1">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">2</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box2">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">0</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box3">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">2</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box4">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">6</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box5">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">å…ƒ</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box6">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">æ—¦</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box7">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">å¿«</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>
    <div class="deng-box deng-box8">
        <div class="deng">
            <div class="xian"></div>
            <div class="deng-a">
                <div class="deng-b">
                    <div class="deng-t">ä¹</div>
                </div>
            </div>
            <div class="shui shui-a">
                <div class="shui-c"></div>
                <div class="shui-b"></div>
            </div>
        </div>
    </div>

    <!-- æ“ä½œæç¤ºå¼¹çª— -->
    <div class="help-modal" id="helpModal">
        <h3 class="help-title">æ“ä½œè¯´æ˜</h3>
        <ul class="help-list">
            <li class="help-item">
                <span class="help-key">Aé”®</span>
                <span class="help-desc">ä»»æ„é¡µé¢ï¼šæ˜¾ç¤º/éšè—æœ¬æ“ä½œæç¤ºï¼Œæ–¹ä¾¿éšæ—¶æŸ¥é˜…</span>
            </li>
            <li class="help-item">
                <span class="help-key">ç©ºæ ¼é”®</span>
                <span class="help-desc">å€’è®¡æ—¶é¡µï¼šè·³è¿‡å¸¸è§„å€’è®¡æ—¶ï¼Œç›´æ¥è¿›å…¥3ç§’å¿«é€Ÿå¼€åœºï¼›ç»“æŸé¡µï¼šæ’­æ”¾èƒŒæ™¯éŸ³ä¹å¹¶å¼¹å‡ºç½®é¡¶æ–‡å­—</span>
            </li>
            <li class="help-item">
                <span class="help-key">Sé”®</span>
                <span class="help-desc">ç»“æŸé¡µï¼šæ‰“å¼€MVæ’­æ”¾é¡µé¢ï¼ˆå…³é—­åè¿”å›åŸç»“æŸé¡µï¼‰</span>
            </li>
            <li class="help-item">
                <span class="help-key">Wé”®</span>
                <span class="help-desc">ç»“æŸé¡µï¼šæ‰“å¼€ç­¾åå¢™é¡µé¢ï¼ˆå…³é—­åè¿”å›åŸç»“æŸé¡µï¼‰</span>
            </li>
            <li class="help-item">
                <span class="help-key">Xé”®</span>
                <span class="help-desc">MV/ç­¾åå¢™é¡µé¢ï¼šå…³é—­å½“å‰é¡µé¢å¹¶è¿”å›ç»“æŸé¡µï¼Œæ¢å¤èƒŒæ™¯éŸ³ä¹</span>
            </li>
            <li class="help-item">
                <span class="help-key">+/-é”®</span>
                <span class="help-desc">ä»»æ„é¡µé¢ï¼šè°ƒèŠ‚èƒŒæ™¯éŸ³ä¹éŸ³é‡ï¼ŒéŸ³é‡è°ƒèŠ‚å¹³æ»‘è¿‡æ¸¡</span>
            </li>
        </ul>
    </div>

    <!-- æ—¶é—´è®¾ç½®å¼¹çª— -->
    <div class="modal" id="timeModal">
        <div class="modal-content">
            <h2 class="modal-title">è®¾ç½®è”æ¬¢ä¼šå¼€å§‹æ—¶é—´</h2>
            <div class="time-set-group">
                <input type="date" class="time-input" id="dateInput">
                <select class="time-input" id="periodSelect">
                    <option value="ä¸Šåˆ">ä¸Šåˆ</option>
                    <option value="ä¸‹åˆ">ä¸‹åˆ</option>
                </select>
                <select class="time-input" id="hourSelect">
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                </select>
                <select class="time-input" id="minuteSelect">
                    <option value="00">00</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                </select>
            </div>
            <p class="tip-text">ğŸ’¡ æç¤ºï¼šè®¾ç½®å®ŒæˆåæŒ‰<span style="color: var(--gold-main); font-weight: bold;">ç©ºæ ¼é”®</span>å¯è·³è¿‡å€’è®¡æ—¶ï¼Œç›´æ¥è¿›å…¥3ç§’å¿«é€Ÿå¼€åœºï¼æŒ‰Aé”®æŸ¥çœ‹æ‰€æœ‰æ“ä½œè¯´æ˜</p>
            <button class="confirm-btn" id="timeConfirmBtn">ç¡®è®¤å¼€å§‹æ—¶é—´</button>
        </div>
    </div>

    <!-- å€’è®¡æ—¶é¡µé¢ -->
    <div class="countdown-page" id="countdownPage">
        <div class="title-container">
            <h1 class="main-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
            <h2 class="sub-title">ä¹å¹´çº§å…­ç­</h2>
        </div>
        <div class="countdown-container">
            <div class="countdown-item">
                <div class="countdown-number" id="hours">00</div>
                <div class="countdown-label">å°æ—¶</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="minutes">00</div>
                <div class="countdown-label">åˆ†é’Ÿ</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="seconds">00</div>
                <div class="countdown-label">ç§’</div>
            </div>
        </div>
        <p class="music-tip">æŒ‰ç©ºæ ¼é”®å¯æå‰å¼€åœº | æŒ‰Aé”®æŸ¥çœ‹æ“ä½œè¯´æ˜</p>
    </div> 

    <!-- 3ç§’å¿«é€Ÿå€’è®¡æ—¶ -->
    <div class="fast-countdown" id="fastCountdown">
        <div class="fast-count-number" id="fastCountNumber">3</div>
    </div>

    <!-- ç»“æŸé¡µï¼ˆä¿ç•™åŸUIï¼Œæ–°å¢ç½®é¡¶æ–‡å­—å®¹å™¨ + ç²’å­/çƒŸèŠ±ï¼‰ -->
    <div class="end-countdown-page" id="endCountdownPage">
        <!-- ç²’å­/çƒŸèŠ±æ•ˆæœï¼ˆå±‚çº§ä½äºç½®é¡¶æ–‡å­—ï¼‰ -->
        <div id="fireworks"></div>
        <div id="particles-js"></div>
        
        <!-- åŸUIå†…å®¹ï¼ˆä¿ç•™ä¸å˜ï¼‰ -->
        <h1 class="end-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
        <h2 class="end-subtitle">ä¹å¹´çº§å…­ç­</h2>
        
        <!-- æ ¸å¿ƒæ–°å¢ï¼šç½®é¡¶æ–‡å­—å®¹å™¨ï¼ˆé»˜è®¤éšè—ï¼ŒæŒ‰ç©ºæ ¼æ˜¾ç¤ºï¼‰ -->
        <div class="top-fixed-text" id="topFixedText">
            <h1 class="top-main-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
            <h2 class="top-sub-title">ä¹å¹´çº§å…­ç­</h2>
        </div>
    </div>

    <!-- MVé¡µé¢å®¹å™¨ -->
    <div class="iframe-container" id="mvContainer">
        <iframe id="mvIframe" src="" frameborder="0" allowfullscreen></iframe>
    </div>

    <!-- å§“åé¡µé¢å®¹å™¨ -->
    <div class="iframe-container" id="nameContainer">
        <iframe id="nameIframe" src="https://yzbjfpv.top/school/2026/name" frameborder="0" allowfullscreen></iframe>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="backgroundMusic" loop src="https://yzbjfpv.top/school/2026/music/start.mp3"></audio>

    <!-- ç²’å­ç‰¹æ•ˆ -->
    <script src="https://cdn.bootcdn.net/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // å…¨å±€å˜é‡
        let isNamePageCreated = false;
        let helpModalTimeout = null;
        const MV_URL = 'https://yzbjfpv.top/school/2026/music/mv';
        const VOLUME_STEP = 0.05; // è¡¥å……éŸ³é‡æ­¥é•¿ï¼ˆåŸä»£ç ç¼ºå¤±ï¼‰

        // Canvasç›¸å…³å…¨å±€å˜é‡
        let canvas, ctx, particles = [];
        const MAX_PARTICLES = 100;
        let currentScene = 'init';

        // é¡µé¢åŠ è½½å®Œæˆåˆå§‹åŒ–
        window.onload = function() {
            initCanvas();
            initPageLogic();
            initFireworks();
            initConfetti();
        };

        // åˆå§‹åŒ–Canvas
        function initCanvas() {
            canvas = document.getElementById('canvasBg');
            ctx = canvas.getContext('2d');

            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            requestAnimationFrame(animateCanvas);
        }

        // Canvaså…¨å±é€‚é…
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            if (currentScene === 'countdown') {
                createBottom3DRiverParticles();
            } else if (currentScene === 'end') { // é€‚é…ç»“æŸé¡µåœºæ™¯
                createBottom3DRiverParticles(); // ä¿ç•™åŸé‡‘æ²³æ•ˆæœï¼Œä¸åˆ‡æ¢ç²’å­
            }
        }

        // Particleç±»ï¼ˆä¿ç•™åŸä¿®å¤é€»è¾‘ï¼Œä¸ä¿®æ”¹ï¼‰
        class Particle {
            constructor(x, y, progress, isBottomRiver = true) {
                this.x = x;
                this.y = y;
                this.progress = progress;
                this.maxOpacity = 0.9;
                this.minOpacity = 0.1;
                this.isBottomRiver = isBottomRiver;
                this.color = '';
                this.size = 0;
                this.opacity = 0;
                this.opacitySpeed = 0;
                this.speed = 0;
                this.offset = 0;
                this.offsetSpeed = 0;

                if (this.isBottomRiver) {
                    this.size = progress < 0.5 ? (Math.random() * 6 + 4) : (Math.random() * 3 + 1);
                    this.opacity = progress < 0.5 ? (Math.random() * 0.8 + 0.6) : (Math.random() * 0.5 + 0.2);
                    this.opacitySpeed = (Math.random() - 0.5) * 0.005;
                    this.colors = ['#FFD700', '#FFA500', '#FF8C00', '#FFED4F'];
                    this.speed = Math.random() * 0.0008 + 0.0003;
                    this.offset = Math.random() * 30 - 15;
                    this.offsetSpeed = Math.random() * 0.3 - 0.15;
                } else {
                    this.size = Math.random() * 4 + 2;
                    this.opacity = Math.random() * 0.6 + 0.3;
                    this.opacitySpeed = (Math.random() - 0.5) * 0.01;
                    this.colors = ['#FFD700', '#FFED4F', '#FFFF00', '#FF8C00'];
                    this.speed = Math.random() * 0.0005 + 0.0002;
                    this.offset = Math.random() * 50 - 25;
                    this.offsetSpeed = Math.random() * 0.4 - 0.2;
                }

                this.color = this.colors[Math.floor(Math.random() * this.colors.length)];
            }

            getCurvePoint(progress) {
                const width = canvas.width;
                const height = canvas.height;

                if (this.isBottomRiver) {
                    const x = progress * width * 1.1 - width * 0.05;
                    const y = height * 0.88 + (1 - progress) * 50 + Math.sin(progress * Math.PI * 2) * 30 + this.offset;
                    return { x, y };
                } else {
                    const x = progress * width * 1.1 - width * 0.05;
                    const y = height * 0.4 + (1 - progress) * 50 + Math.sin(progress * Math.PI * 4) * 40 + this.offset;
                    return { x, y };
                }
            }

            update() {
                this.progress += this.speed;
                if (this.progress > 1) {
                    this.progress = 0;
                    this.offset = this.isBottomRiver ? (Math.random() * 30 - 15) : (Math.random() * 50 - 25);
                    if (this.isBottomRiver) {
                        this.size = this.progress < 0.5 ? (Math.random() * 6 + 4) : (Math.random() * 3 + 1);
                        this.opacity = this.progress < 0.5 ? (Math.random() * 0.8 + 0.6) : (Math.random() * 0.5 + 0.2);
                    }
                }
                this.offset += this.offsetSpeed;
                const maxOffset = this.isBottomRiver ? 15 : 25;
                if (this.offset > maxOffset) this.offset = maxOffset;
                if (this.offset < -maxOffset) this.offset = -maxOffset;

                const curvePoint = this.getCurvePoint(this.progress);
                this.x = curvePoint.x;
                this.y = curvePoint.y;

                this.opacity += this.opacitySpeed;
                if (this.opacity > this.maxOpacity || this.opacity < this.minOpacity) {
                    this.opacitySpeed *= -1;
                }
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.opacity;
                ctx.fillStyle = this.color;
                if (this.isBottomRiver) {
                    ctx.beginPath();
                    ctx.ellipse(this.x, this.y, this.size, this.size * 0.7, Math.PI / 10, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.restore();
            }
        }

        // åˆ›å»ºåº•éƒ¨ä¼ª3Dé‡‘æ²³ç²’å­ï¼ˆä¿ç•™åŸæ•ˆæœï¼‰
        function createBottom3DRiverParticles() {
            particles = [];
            for (let i = 0; i < MAX_PARTICLES; i++) {
                const progress = Math.random();
                const curvePoint = new Particle(0, 0, progress, true).getCurvePoint(progress);
                particles.push(new Particle(curvePoint.x, curvePoint.y, progress, true));
            }
        }

        // CanvasåŠ¨ç”»å¾ªç¯
        function animateCanvas() {
            ctx.fillStyle = 'rgba(139, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
            }

            requestAnimationFrame(animateCanvas);
        }

        // åœºæ™¯åˆ‡æ¢ï¼ˆç®€åŒ–ï¼Œä»…ä¿ç•™å€’è®¡æ—¶/ç»“æŸé¡µï¼Œä¸åˆ‡æ¢éŸ³ä¹é¡µï¼‰
        function switchScene(scene) {
            currentScene = scene;
            particles = [];
            const allDengBoxes = document.querySelectorAll('.deng-box');

            switch (scene) {
                case 'countdown':
                    createBottom3DRiverParticles();
                    allDengBoxes.forEach(box => box.classList.remove('hidden'));
                    break;
                case 'end':
                    createBottom3DRiverParticles(); // ä¿ç•™åŸé‡‘æ²³æ•ˆæœï¼Œä¸éšè—ç¯ç¬¼
                    allDengBoxes.forEach(box => box.classList.remove('hidden'));
                    break;
                default:
                    particles = [];
                    allDengBoxes.forEach(box => box.classList.remove('hidden'));
                    break;
            }
        }

        // çƒŸèŠ±æ•ˆæœï¼ˆä¿ç•™ï¼Œå±‚çº§ä½äºç½®é¡¶æ–‡å­—ï¼‰
        function initFireworks() {
            const fireworks = document.getElementById('fireworks');
            if (!fireworks) return;

            function createFirework() {
                if (!document.getElementById('endCountdownPage').classList.contains('show')) return;

                const firework = document.createElement('div');
                firework.style.position = 'absolute';
                firework.style.width = '5px';
                firework.style.height = '5px';
                firework.style.backgroundColor = '#ffd700';
                firework.style.borderRadius = '50%';
                firework.style.left = Math.random() * 100 + '%';
                firework.style.bottom = '0';
                firework.style.zIndex = '701';
                fireworks.appendChild(firework);

                const colors = ['#ffd700', '#ff0000', '#ffffff', '#ff8c00', '#ff69b4'];
                firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                let top = 100;
                const duration = Math.random() * 2000 + 1000;
                const speed = Math.random() * 5 + 3;
                const animation = setInterval(function() {
                    top -= speed;
                    firework.style.top = top + '%';
                    if (top < 0) {
                        clearInterval(animation);
                        fireworks.removeChild(firework);
                    }
                }, 16);

                setTimeout(function() {
                    for (let i = 0; i < 50; i++) {
                        const particle = document.createElement('div');
                        particle.style.position = 'absolute';
                        particle.style.width = Math.random() * 8 + 2 + 'px';
                        particle.style.height = Math.random() * 8 + 2 + 'px';
                        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        particle.style.borderRadius = '50%';
                        particle.style.left = firework.style.left;
                        particle.style.top = firework.style.top;
                        particle.style.opacity = '1';
                        particle.style.zIndex = '701';
                        fireworks.appendChild(particle);

                        const angle = Math.random() * Math.PI * 2;
                        const distance = Math.random() * 80 + 20;
                        const vx = Math.cos(angle) * distance;
                        const vy = Math.sin(angle) * distance;

                        let px = parseFloat(firework.style.left) || 50;
                        let py = parseFloat(firework.style.top) || 50;
                        let opacity = 1;
                        const particleAnim = setInterval(() => {
                            px += vx / 20;
                            py += vy / 20;
                            opacity -= 0.02;
                            particle.style.left = px + '%';
                            particle.style.top = py + '%';
                            particle.style.opacity = opacity;

                            if (opacity <= 0) {
                                clearInterval(particleAnim);
                                fireworks.removeChild(particle);
                            }
                        }, 16);
                    }

                    fireworks.removeChild(firework);
                }, duration);
            }

            setInterval(createFirework, 500);
        }

        // é£˜è½é‡‘ç‰‡/èŠ±ç“£ç‰¹æ•ˆï¼ˆä¿ç•™ï¼Œå±‚çº§ä½äºç½®é¡¶æ–‡å­—ï¼‰
        function initConfetti() {
            const endPage = document.getElementById('endCountdownPage');
            if (!endPage) return;

            function createConfetti() {
                if (!endPage.classList.contains('show')) return;

                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.animationDuration = Math.random() * 10 + 5 + 's';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '0';
                }
                const colors = ['#ffd700', '#ff8c00', '#fff'];
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                endPage.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 15000);
            }

            setInterval(createConfetti, 200);
        }

        // æ“ä½œæç¤ºå¼¹çª—åˆ‡æ¢
        function toggleHelpModal() {
            const helpModal = document.getElementById('helpModal');
            if (!helpModal) return;

            if (helpModalTimeout) clearTimeout(helpModalTimeout);
            
            if (helpModal.classList.contains('show')) {
                helpModal.classList.remove('show');
            } else {
                helpModal.classList.add('show');
                helpModalTimeout = setTimeout(() => {
                    helpModal.classList.remove('show');
                }, 8000);
            }
        }

        // é¡µé¢æ ¸å¿ƒé€»è¾‘ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼šå–æ¶ˆé¡µé¢åˆ‡æ¢ï¼ŒåŒæ­¥æ’­æ”¾éŸ³ä¹+æ˜¾ç¤ºç½®é¡¶æ–‡å­—ï¼‰
        function initPageLogic() {
            const timeModal = document.getElementById('timeModal');
            const countdownPage = document.getElementById('countdownPage');
            const fastCountdown = document.getElementById('fastCountdown');
            const endCountdownPage = document.getElementById('endCountdownPage');
            const topFixedText = document.getElementById('topFixedText'); // æ–°å¢ç½®é¡¶æ–‡å­—DOM
            const mvContainer = document.getElementById('mvContainer');
            const nameContainer = document.getElementById('nameContainer');
            const mvIframe = document.getElementById('mvIframe');
            const backgroundMusic = document.getElementById('backgroundMusic');
            
            const dateInput = document.getElementById('dateInput');
            const periodSelect = document.getElementById('periodSelect');
            const hourSelect = document.getElementById('hourSelect');
            const minuteSelect = document.getElementById('minuteSelect');
            const timeConfirmBtn = document.getElementById('timeConfirmBtn');
            
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');
            const fastCountNumber = document.getElementById('fastCountNumber');
            
            let targetTime = null;
            let countdownInterval = null;
            let volumeInterval = null;
            let lastHours = '00', lastMinutes = '00', lastSeconds = '00';
            let isMusicPlayed = false; // æ ‡è®°éŸ³ä¹æ˜¯å¦å·²æ’­æ”¾ï¼Œé¿å…é‡å¤è§¦å‘

            if (![timeModal, countdownPage, endCountdownPage, timeConfirmBtn].every(el => el)) {
                console.error('éƒ¨åˆ†æ ¸å¿ƒå…ƒç´ ç¼ºå¤±ï¼Œæ— æ³•æ­£å¸¸åˆå§‹åŒ–');
                return;
            }

            // åˆå§‹åŒ–æ—¶é—´é€‰æ‹©å™¨
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            dateInput.value = formattedDate;

            // ç¡®è®¤æŒ‰é’®äº‹ä»¶
            timeConfirmBtn.addEventListener('click', function() {
                const selectedDate = dateInput.value || formattedDate;
                const period = periodSelect.value;
                const hourVal = hourSelect.value;
                const minuteVal = minuteSelect.value;

                let hour = parseInt(hourVal);
                if (period === 'ä¸‹åˆ' && hour < 12) hour += 12;
                else if (period === 'ä¸Šåˆ' && hour === 12) hour = 0;
                const minute = parseInt(minuteVal);

                targetTime = new Date(selectedDate);
                targetTime.setHours(hour);
                targetTime.setMinutes(minute);
                targetTime.setSeconds(0);

                if (isNaN(targetTime.getTime())) {
                    alert('æ—¶é—´è®¾ç½®é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼');
                    return;
                }

                switchScene('countdown');
                timeModal.classList.add('hidden');
                countdownPage.classList.add('show');
                startCountdown();
            });

            // å€’è®¡æ—¶é€»è¾‘
            function startCountdown() {
                if (countdownInterval) clearInterval(countdownInterval);
                updateCountdown();
                countdownInterval = setInterval(updateCountdown, 1000);
            }

            function updateCountdown() {
                const now = new Date();
                const diff = targetTime - now;
                
                if (diff <= 0) {
                    clearInterval(countdownInterval);
                    countdownPage.classList.remove('show');
                    endCountdownPage.classList.add('show');
                    switchScene('end'); // åˆ‡æ¢åˆ°ç»“æŸé¡µåœºæ™¯ï¼Œä¿ç•™åŸUI
                    return;
                }
                
                const hours = Math.floor(diff / 3600000).toString().padStart(2, '0');
                const minutes = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
                const seconds = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
                
                if (hours !== lastHours) {
                    hoursEl.textContent = hours;
                    hoursEl.classList.add('flip');
                    setTimeout(() => hoursEl.classList.remove('flip'), 800);
                    lastHours = hours;
                }
                if (minutes !== lastMinutes) {
                    minutesEl.textContent = minutes;
                    minutesEl.classList.add('flip');
                    setTimeout(() => minutesEl.classList.remove('flip'), 800);
                    lastMinutes = minutes;
                }
                if (seconds !== lastSeconds) {
                    secondsEl.textContent = seconds;
                    secondsEl.classList.add('flip');
                    setTimeout(() => secondsEl.classList.remove('flip'), 800);
                    lastSeconds = seconds;
                }
            }

            // 3ç§’å¿«é€Ÿå€’è®¡æ—¶ï¼ˆç»“æŸåç›´æ¥æ˜¾ç¤ºç»“æŸé¡µï¼Œä¸åˆ‡æ¢å…¶ä»–é¡µé¢ï¼‰
            function startFastCountdown() {
                countdownPage.classList.remove('show');
                fastCountdown.classList.add('show');
                
                let count = 3;
                fastCountNumber.textContent = count;
                fastCountNumber.classList.add('animate__animated', 'animate__bounceIn', 'animate__rotateIn');
                
                const fastInterval = setInterval(() => {
                    count--;
                    if (count < 0) {
                        clearInterval(fastInterval);
                        fastCountdown.classList.remove('show');
                        endCountdownPage.classList.add('show');
                        switchScene('end'); // åˆ‡æ¢åˆ°ç»“æŸé¡µåœºæ™¯ï¼Œä¿ç•™åŸUI
                        return;
                    }
                    
                    fastCountNumber.textContent = count;
                    fastCountNumber.classList.remove('animate__animated', 'animate__bounceIn', 'animate__rotateIn');
                    setTimeout(() => {
                        fastCountNumber.classList.add('animate__animated', 'animate__bounceIn', 'animate__rotateIn');
                    }, 10);
                }, 1000);
            }

            // ç²’å­ç‰¹æ•ˆï¼ˆåˆå§‹åŒ–åœ¨ç»“æŸé¡µï¼Œä¸åˆ‡æ¢é¡µé¢ï¼‰
            function initParticles() {
                if (typeof particlesJS === 'undefined') return;
                particlesJS('particles-js', {
                    "particles": {
                        "number": { "value": 300, "density": { "enable": true, "value_area": 800 } },
                        "color": { "value": "#FFD700" },
                        "shape": { "type": "circle" },
                        "opacity": { 
                            "value": 0.9, 
                            "anim": { "enable": true, "speed": 0.5, "opacity_min": 0.4 } 
                        },
                        "size": { 
                            "value": 10, 
                            "random": true, 
                            "anim": { "enable": true, "speed": 1, "size_min": 4 } 
                        },
                        "line_linked": { 
                            "enable": true, 
                            "distance": 180, 
                            "color": "#FFD700", 
                            "opacity": 0.8, 
                            "width": 3 
                        },
                        "move": { 
                            "enable": true, 
                            "speed": 8, 
                            "direction": "none", 
                            "random": true, 
                            "bounce": true 
                        }
                    },
                    "interactivity": {
                        "events": {
                            "onhover": { "enable": true, "mode": "grab" },
                            "onclick": { "enable": true, "mode": "push" },
                            "resize": true
                        }
                    },
                    "retina_detect": true
                });
            }

            // é”®ç›˜æ“ä½œé€»è¾‘ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼šå–æ¶ˆé¡µé¢åˆ‡æ¢ï¼ŒåŒæ­¥æ’­æ”¾éŸ³ä¹+æ˜¾ç¤ºç½®é¡¶æ–‡å­—ï¼‰
            document.addEventListener('keydown', (e) => {
                e.preventDefault();
                
                if (e.key.toLowerCase() === 'a') {
                    toggleHelpModal();
                    return;
                }

                if (e.key.toLowerCase() === 'x') {
                    const isMvShow = mvContainer.classList.contains('show');
                    const isNameShow = nameContainer.classList.contains('show');
                    if (isMvShow || isNameShow) {
                        mvContainer.classList.remove('show');
                        nameContainer.classList.remove('show');
                        endCountdownPage.classList.add('show'); // è¿”å›ç»“æŸé¡µï¼ˆåŸUIï¼‰
                        switchScene('end');
                        backgroundMusic.play().catch(err => {
                            document.addEventListener('click', () => backgroundMusic.play(), { once: true });
                        });
                    }
                    return;
                }

                if (e.code === 'Space') {
                    // åœºæ™¯1ï¼šå€’è®¡æ—¶é¡µ â†’ å¿«é€Ÿå€’è®¡æ—¶ï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
                    if (countdownPage.classList.contains('show')) {
                        clearInterval(countdownInterval);
                        startFastCountdown();
                    }
                    // åœºæ™¯2ï¼šç»“æŸé¡µ â†’ æ’­æ”¾éŸ³ä¹ + æ˜¾ç¤ºç½®é¡¶æ–‡å­—ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼šä¸åˆ‡æ¢é¡µé¢ï¼‰
                    else if (endCountdownPage.classList.contains('show') && !isMusicPlayed) {
                        isMusicPlayed = true; // æ ‡è®°å·²æ’­æ”¾ï¼Œé¿å…é‡å¤è§¦å‘
                        
                        // 1. æ’­æ”¾èƒŒæ™¯éŸ³ä¹
                        backgroundMusic.play().catch(err => {
                            document.addEventListener('click', () => backgroundMusic.play(), { once: true });
                        });
                        
                        // 2. åˆå§‹åŒ–ç²’å­ç‰¹æ•ˆï¼ˆåœ¨ç»“æŸé¡µæ˜¾ç¤ºï¼Œä¸åˆ‡æ¢é¡µé¢ï¼‰
                        initParticles();
                        
                        // 3. æ˜¾ç¤ºç½®é¡¶æ–‡å­—ï¼ˆåŒæ­¥å¼¹å‡ºï¼Œå¹³æ»‘è¿‡æ¸¡ï¼‰
                        topFixedText.classList.add('show');
                        
                        // 4. ä¿ç•™åŸç¯ç¬¼ã€é‡‘æ²³æ•ˆæœï¼ˆä¸éšè—ä»»ä½•å…ƒç´ ï¼‰
                        const allDengBoxes = document.querySelectorAll('.deng-box');
                        allDengBoxes.forEach(box => box.classList.remove('hidden'));
                    }
                    // åœºæ™¯3ï¼šç»“æŸé¡µï¼ˆéŸ³ä¹å·²æ’­æ”¾ï¼‰â†’ æš‚åœ/æ’­æ”¾éŸ³ä¹ï¼ˆä¿ç•™åŸåŠŸèƒ½ï¼‰
                    else if (endCountdownPage.classList.contains('show') && isMusicPlayed) {
                        if (backgroundMusic.paused) {
                            backgroundMusic.play();
                        } else {
                            backgroundMusic.pause();
                        }
                    }
                    return;
                }

                if (e.key.toLowerCase() === 's' && endCountdownPage.classList.contains('show')) {
                    backgroundMusic.pause();
                    endCountdownPage.classList.remove('show');
                    mvContainer.classList.add('show');
                    mvIframe.src = '';
                    setTimeout(() => {
                        mvIframe.src = MV_URL + '?t=' + new Date().getTime();
                    }, 100);
                    return;
                }

                if (e.key.toLowerCase() === 'w' && endCountdownPage.classList.contains('show')) {
                    backgroundMusic.pause();
                    endCountdownPage.classList.remove('show');
                    nameContainer.classList.add('show');
                    if (!isNamePageCreated) {
                        isNamePageCreated = true;
                    }
                    return;
                }

                if (e.code === 'Minus' || e.code === 'NumpadSubtract') {
                    if (!volumeInterval) {
                        volumeInterval = setInterval(() => {
                            backgroundMusic.volume = Math.max(0, backgroundMusic.volume - VOLUME_STEP);
                        }, 50);
                    }
                }
                if (e.code === 'Equal' || e.code === 'NumpadAdd') {
                    if (!volumeInterval) {
                        volumeInterval = setInterval(() => {
                            backgroundMusic.volume = Math.min(1, backgroundMusic.volume + VOLUME_STEP);
                        }, 50);
                    }
                }
            });

            // æŒ‰é”®æ¾å¼€åœæ­¢éŸ³é‡è°ƒèŠ‚
            document.addEventListener('keyup', (e) => {
                if (e.code === 'Minus' || e.code === 'NumpadSubtract' || 
                    e.code === 'Equal' || e.code === 'NumpadAdd') {
                    clearInterval(volumeInterval);
                    volumeInterval = null;
                }
            });

            // åˆå§‹åŒ–éŸ³é‡
            backgroundMusic.volume = 0.8;
        }
    </script>
</body>
</html>
