<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026å…ƒæ—¦è”æ¬¢ä¼š - ä¹å¹´çº§å…­ç­</title>
    <!-- åŠ¨ç”»åº“ï¼ˆå›½å†…CDNï¼‰ -->
    <link href="https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <!-- æ•°å­—å­—ä½“ï¼ˆå›½å†…CDNï¼‰ -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* é¢œè‰²/å­—ä½“å˜é‡ï¼ˆæ˜ç¡®å±‚çº§ï¼‰ */
        :root {
            /* çº¢é‡‘é…è‰² */
            --red-deep: #8B0000;    
            --red-medium: #B22222;  
            --red-light: #CD5C5C;   
            --gold-main: #FFD700;   
            --gold-light: #FFED4F;  
            --gold-dark: #FFA500;   

            /* å­—ä½“ä½“ç³»ï¼ˆä¸»æ¬¡åˆ†æ˜ï¼‰ */
            --font-title: "Noto Serif SC", "Source Han Serif", "STSong", serif; /* è¡¬çº¿å­—ä½“ï¼Œç«¯åº„åšé‡ */
            --font-number: "Oswald", "Consolas", "Monaco", sans-serif;          /* æ•°å­—ä¸“ç”¨ï¼Œç²—ä½“ç­‰å®½ */
            --font-text: "Noto Serif SC", "STKaiti", "KaiTi", serif;            /* æ­£æ–‡æ¥·ä½“ */
            
            /* å­—ä½“ç²—ç»† */
            --font-weight-heavy: 900; /* ä¸»æ ‡é¢˜ç‰¹ç²— */
            --font-weight-bold: 700;  /* æ•°å­—/å‰¯æ ‡é¢˜ç²— */
            --font-weight-regular: 400;/* å•ä½/æç¤ºæ–‡å­—å¸¸è§„ */
        }

        /* ========== åŠ¨æ€çº¢è‰²é‡‘æ²™èƒŒæ™¯ï¼ˆçº¯CSSï¼Œæ— å¤–éƒ¨å›¾ç‰‡ï¼‰ ========== */
        body {
            overflow: hidden;
            position: relative;
            background: 
                /* çº¢è‰²æ¸å˜åº•å±‚ */
                linear-gradient(135deg, var(--red-deep) 0%, var(--red-medium) 50%, var(--red-deep) 100%),
                /* é‡‘æ²™çº¹ç†ä¸­å±‚ */
                linear-gradient(90deg, 
                    rgba(255, 215, 0, 0.02) 0px, 
                    rgba(255, 215, 0, 0.08) 1px, 
                    rgba(255, 215, 0, 0.02) 2px,
                    rgba(255, 215, 0, 0.05) 3px,
                    rgba(255, 215, 0, 0.02) 4px
                ) repeat,
                /* é«˜å…‰å±‚ */
                linear-gradient(45deg, rgba(255, 255, 255, 0.03) 0%, transparent 100%);
            background-blend-mode: overlay, multiply, normal;
            background-size: 400% 400%, 10px 10px, 100% 100%;
            /* åŠ¨æ€æµåŠ¨åŠ¨ç”» */
            animation: 
                bg-flow 25s ease-in-out infinite,
                sand-flow 35s linear infinite,
                sand-glow 15s ease-in-out infinite alternate;
            font-family: var(--font-text);
            color: var(--gold-main);
        }

        /* èƒŒæ™¯æµåŠ¨åŠ¨ç”» */
        @keyframes bg-flow {
            0% { background-position: 0% 50%, 0 0, 0 0; }
            50% { background-position: 100% 50%, 0 0, 0 0; }
            100% { background-position: 0% 50%, 0 0, 0 0; }
        }

        /* é‡‘æ²™æµåŠ¨åŠ¨ç”» */
        @keyframes sand-flow {
            0% { background-position: 0 0, 0 0, 0 0; }
            100% { background-position: 0 0, 40px 40px, 0 0; }
        }

        /* é‡‘æ²™é«˜å…‰åŠ¨ç”» */
        @keyframes sand-glow {
            0% { filter: brightness(1.0) contrast(1.1); }
            100% { filter: brightness(1.05) contrast(1.15); }
        }

        /* ========== Canvasç¯ç¬¼å®¹å™¨ï¼ˆå…¨å±ï¼Œåº•å±‚ï¼‰ ========== */
        #lanternCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            pointer-events: none;
            opacity: 0.9;
        }

        /* ========== æ—¶é—´è®¾ç½®å¼¹çª—ï¼ˆä¼˜åŒ–æ ·å¼ï¼‰ ========== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, rgba(var(--red-deep), 0.98), rgba(var(--red-medium), 0.98));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .modal-content {
            background: linear-gradient(135deg, var(--red-medium), var(--gold-main));
            padding: 50px 70px;
            border-radius: 24px;
            box-shadow: 0 0 100px rgba(var(--gold-main), 0.7), inset 0 0 30px rgba(255, 255, 255, 0.9);
            border: 6px solid var(--gold-main);
            text-align: center;
            animation: modal-pop 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1001;
        }
        @keyframes modal-pop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        .modal-title {
            font-size: 2.8vw;
            margin-bottom: 35px;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            text-shadow: 0 0 10px var(--gold-main), 0 0 20px var(--red-deep);
            letter-spacing: 8px;
            color: #fff;
        }
        .time-set-group {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-bottom: 35px;
            flex-wrap: wrap;
        }
        .time-input {
            padding: 18px 24px;
            font-size: 1.8vw;
            border: 4px solid var(--gold-main);
            border-radius: 12px;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
            color: var(--gold-main);
            font-family: var(--font-number);
            text-align: center;
            min-width: 130px;
            transition: all 0.3s ease;
        }
        .time-input:focus {
            outline: none;
            box-shadow: 0 0 30px var(--gold-main);
            transform: translateY(-2px);
        }
        .tip-text {
            font-size: 1.5vw;
            margin-bottom: 35px;
            color: #fff;
            font-family: var(--font-text);
            text-shadow: 0 0 8px var(--red-deep);
            line-height: 1.8;
        }
        .confirm-btn {
            padding: 18px 45px;
            font-size: 2vw;
            background: linear-gradient(135deg, var(--gold-main), var(--gold-light));
            border: none;
            border-radius: 12px;
            color: var(--red-deep);
            font-weight: var(--font-weight-bold);
            font-family: var(--font-title);
            cursor: pointer;
            box-shadow: 0 0 30px rgba(var(--gold-main), 0.8);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .confirm-btn::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
        .confirm-btn:active::after {
            width: 300px;
            height: 300px;
            opacity: 0;
        }
        .confirm-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 0 50px #fff, 0 0 20px var(--gold-main);
        }
        .confirm-btn:active {
            transform: scale(1.05);
        }

        /* ========== å€’è®¡æ—¶é¡µé¢ï¼ˆé‡æ„æ’ç‰ˆï¼Œä¸»æ¬¡åˆ†æ˜ï¼‰ ========== */
        .countdown-page {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 3;
            padding: 0 20px;
        }
        .countdown-page.show {
            opacity: 1;
        }

        /* æ ‡é¢˜åŒºåŸŸï¼ˆé‡æ–°æ’ç‰ˆï¼Œä¸»æ¬¡åˆ†æ˜ï¼‰ */
        .title-container {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
        }
        /* ä¸»æ ‡é¢˜ï¼šè¶…å¤§å·ã€ç‰¹ç²—ã€é‡‘å…‰æ•ˆæœ */
        .main-title {
            font-size: 8vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            text-shadow: 
                0 0 20px var(--gold-main), 
                0 0 40px var(--red-deep), 
                0 0 60px var(--gold-main),
                2px 2px 0 var(--gold-dark);
            letter-spacing: 20px;
            margin-bottom: 15px;
            background: linear-gradient(120deg, #fff, var(--gold-main), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: title-shimmer 5s ease-in-out infinite;
        }
        @keyframes title-shimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 200% 50%; }
            100% { background-position: 0% 50%; }
        }
        /* å‰¯æ ‡é¢˜ï¼šä¸­ç­‰å­—å·ã€ç²—ä½“ã€æ¬¡è¦è§†è§‰ */
        .sub-title {
            font-size: 3vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            text-shadow: 0 0 15px var(--gold-main), 0 0 30px var(--red-deep);
            letter-spacing: 15px;
            color: #fff;
            margin-top: 10px;
        }

        /* å€’è®¡æ—¶å®¹å™¨ï¼ˆç¼©å°æ–¹æ¡†å°ºå¯¸ï¼Œä¼˜åŒ–é—´è·ï¼‰ */
        .countdown-container {
            display: flex;
            gap: 40px; /* ç¼©å°é—´è· */
            margin-bottom: 40px;
            perspective: 1500px;
        }

        /* å€’è®¡æ—¶é¡¹ï¼ˆç¼©å°å°ºå¯¸ï¼Œä¼˜åŒ–æ ·å¼ï¼‰ */
        .countdown-item {
            text-align: center;
            background: linear-gradient(135deg, rgba(var(--red-deep), 0.85), rgba(var(--red-medium), 0.85));
            padding: 30px 40px; /* ç¼©å°å†…è¾¹è· */
            border-radius: 24px; /* ä¼˜åŒ–åœ†è§’ */
            border: 6px solid var(--gold-main);
            box-shadow: 
                0 0 60px rgba(var(--gold-main), 0.7), 
                inset 0 0 30px rgba(var(--gold-main), 0.2);
            animation: item-pulse 3s ease-in-out infinite, item-rotate 10s ease-in-out infinite;
            transform-style: preserve-3d;
            position: relative;
            min-width: 180px; /* é™åˆ¶æœ€å°å®½åº¦ */
        }
        @keyframes item-pulse {
            0% { transform: scale(1) rotateY(0); box-shadow: 0 0 60px rgba(var(--gold-main), 0.7); }
            50% { transform: scale(1.1) rotateY(8deg); box-shadow: 0 0 90px #fff, 0 0 40px var(--gold-main); }
            100% { transform: scale(1) rotateY(0); box-shadow: 0 0 60px rgba(var(--gold-main), 0.7); }
        }
        @keyframes item-rotate {
            0% { transform: rotateY(0) rotateX(0); }
            50% { transform: rotateY(4deg) rotateX(2deg); }
            100% { transform: rotateY(0) rotateX(0); }
        }

        /* å€’è®¡æ—¶æ•°å­—ï¼ˆç‰¹ç²—ã€è¶…å¤§å·ã€æ ¸å¿ƒè§†è§‰ï¼‰ */
        .countdown-number {
            font-size: 10vw; /* ç¼©å°ä½†ä¿æŒè§†è§‰æ ¸å¿ƒ */
            font-weight: var(--font-weight-heavy);
            font-family: var(--font-number);
            color: var(--gold-main);
            text-shadow: 
                0 0 20px var(--gold-main), 
                0 0 40px var(--red-deep), 
                0 0 60px var(--gold-main),
                3px 3px 0 var(--gold-dark);
            position: relative;
            line-height: 1; /* ä¼˜åŒ–è¡Œé«˜ */
            transform-origin: center;
        }

        /* å…¨æ–°ç¿»ç‰ŒåŠ¨ç”»ï¼ˆä¿®å¤ç¿»é¡µé—®é¢˜ï¼‰ */
        .countdown-number.flip {
            animation: flip-card 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @keyframes flip-card {
            0% { transform: rotateX(0deg); opacity: 1; }
            50% { transform: rotateX(90deg); opacity: 0.5; }
            100% { transform: rotateX(0deg); opacity: 1; }
        }

        /* å€’è®¡æ—¶å•ä½ï¼ˆå°å·ã€å¸¸è§„å­—é‡ã€æ¬¡è¦è§†è§‰ï¼‰ */
        .countdown-label {
            font-size: 1.8vw; /* ç¼©å°å­—å· */
            margin-top: 15px;
            color: #fff;
            font-family: var(--font-text);
            font-weight: var(--font-weight-regular);
            text-shadow: 0 0 10px var(--gold-main);
            letter-spacing: 6px;
        }

        .music-tip {
            display: none;
        }

        /* ========== 3ç§’å¿«é€Ÿå€’è®¡æ—¶ ========== */
        .fast-countdown {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 900;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .fast-countdown.show {
            opacity: 1;
            pointer-events: all;
        }
        .fast-count-number {
            font-size: 25vw;
            font-family: var(--font-number);
            font-weight: var(--font-weight-heavy);
            color: var(--gold-main);
            text-shadow: 0 0 50px var(--gold-main), 0 0 100px var(--red-deep), 0 0 150px var(--gold-main);
            position: relative;
            animation: fast-count-explode 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes fast-count-explode {
            0% { transform: scale(0) rotate(0); opacity: 0; text-shadow: 0 0 0 var(--gold-main); }
            50% { transform: scale(2) rotate(5deg); opacity: 1; text-shadow: 0 0 100px var(--gold-main); }
            100% { transform: scale(1) rotate(0); opacity: 1; text-shadow: 0 0 50px var(--gold-main); }
        }

        /* ========== çº¯å‡€é‡‘å…‰çº¢å­—ç»“æŸé¡µ ========== */
        .end-countdown-page {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 800;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium));
        }
        .end-countdown-page.show {
            opacity: 1;
            pointer-events: all;
        }
        .end-title {
            font-size: 9vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            color: var(--gold-main);
            text-shadow: 0 0 30px var(--gold-main), 0 0 60px var(--red-deep), 0 0 90px var(--gold-main);
            letter-spacing: 20px;
            margin-bottom: 40px;
            animation: end-title-glow 3s ease-in-out infinite alternate;
        }
        @keyframes end-title-glow {
            0% { text-shadow: 0 0 30px var(--gold-main), 0 0 60px var(--red-deep); }
            100% { text-shadow: 0 0 60px var(--gold-main), 0 0 120px var(--red-deep), 0 0 180px var(--gold-main); }
        }
        .end-subtitle {
            font-size: 4vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            color: #fff;
            text-shadow: 0 0 20px var(--gold-main), 0 0 40px var(--red-deep);
            letter-spacing: 15px;
        }

        /* ========== éŸ³ä¹æ’­æ”¾é¡µé¢ ========== */
        .music-page {
            width: 100vw;
            height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background: linear-gradient(135deg, var(--red-deep), var(--red-medium), var(--red-deep));
            background-size: 400% 400%;
            animation: opening-bg 15s ease-in-out infinite;
            z-index: 700;
        }
        .music-page.show {
            display: flex;
        }
        @keyframes opening-bg {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .music-title {
            font-size: 9vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-heavy);
            text-shadow: 0 0 30px var(--gold-main), 0 0 60px var(--red-deep), 0 0 90px var(--gold-main);
            letter-spacing: 20px;
            margin-bottom: 35px;
            background: linear-gradient(120deg, #fff, var(--gold-main), var(--red-deep), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: opening-shimmer 6s ease-in-out infinite;
        }
        @keyframes opening-shimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 300% 50%; }
            100% { background-position: 0% 50%; }
        }
        .music-subtitle {
            font-size: 4.5vw;
            font-family: var(--font-title);
            font-weight: var(--font-weight-bold);
            text-shadow: 0 0 20px var(--gold-main), 0 0 40px var(--red-deep);
            letter-spacing: 15px;
            margin-bottom: 60px;
            color: #fff;
        }
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 4;
        }

        /* ========== å…¨å±iframeï¼ˆåµŒå…¥MVï¼‰ ========== */
        .mv-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            border: 0;
            z-index: 2000;
            display: none;
            background: #000;
        }
        .mv-iframe.show {
            display: block;
        }

        /* éŸ³é‡æ§åˆ¶éšè—æç¤º */
        .volume-tip {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 1.2vw;
            color: var(--gold-main);
            text-shadow: 0 0 5px var(--red-deep);
        }
    </style>
</head>
<body>
    <!-- CanvasåŠ¨æ€ç¯ç¬¼ï¼ˆåº•å±‚ï¼‰ -->
    <canvas id="lanternCanvas"></canvas>

    <!-- æ—¶é—´è®¾ç½®å¼¹çª— -->
    <div class="modal" id="timeModal">
        <div class="modal-content">
            <h2 class="modal-title">è®¾ç½®è”æ¬¢ä¼šå¼€å§‹æ—¶é—´</h2>
            <div class="time-set-group">
                <input type="date" class="time-input" id="dateInput">
                <select class="time-input" id="periodSelect">
                    <option value="ä¸Šåˆ">ä¸Šåˆ</option>
                    <option value="ä¸‹åˆ">ä¸‹åˆ</option>
                </select>
                <select class="time-input" id="hourSelect">
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                </select>
                <select class="time-input" id="minuteSelect">
                    <option value="00">00</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="40">40</option>
                    <option value="50">50</option>
                </select>
            </div>
            <p class="tip-text">ğŸ’¡ æç¤ºï¼šè®¾ç½®å®ŒæˆåæŒ‰<span style="color: var(--gold-main); font-weight: bold;">ç©ºæ ¼é”®</span>å¯è·³è¿‡å€’è®¡æ—¶ï¼Œç›´æ¥è¿›å…¥3ç§’å¿«é€Ÿå¼€åœºï¼</p>
            <button class="confirm-btn" id="timeConfirmBtn">ç¡®è®¤å¼€å§‹æ—¶é—´</button>
        </div>
    </div>

    <!-- å€’è®¡æ—¶é¡µé¢ï¼ˆé‡æ„ç‰ˆï¼‰ -->
    <div class="countdown-page" id="countdownPage">
        <div class="title-container">
            <h1 class="main-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
            <h2 class="sub-title">ä¹å¹´çº§å…­ç­</h2>
        </div>
        <div class="countdown-container">
            <div class="countdown-item">
                <div class="countdown-number" id="hours">00</div>
                <div class="countdown-label">å°æ—¶</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="minutes">00</div>
                <div class="countdown-label">åˆ†é’Ÿ</div>
            </div>
            <div class="countdown-item">
                <div class="countdown-number" id="seconds">00</div>
                <div class="countdown-label">ç§’</div>
            </div>
        </div>
        <p class="music-tip">æŒ‰ç©ºæ ¼é”®å¯æå‰å¼€åœº | å¼€åœºåæŒ‰ç©ºæ ¼é”®æš‚åœ/æ’­æ”¾éŸ³ä¹</p>
    </div>

    <!-- 3ç§’å¿«é€Ÿå€’è®¡æ—¶ -->
    <div class="fast-countdown" id="fastCountdown">
        <div class="fast-count-number" id="fastCountNumber">3</div>
    </div>

    <!-- çº¯å‡€é‡‘å…‰çº¢å­—ç»“æŸé¡µ -->
    <div class="end-countdown-page" id="endCountdownPage">
        <h1 class="end-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
        <h2 class="end-subtitle">ä¹å¹´çº§å…­ç­</h2>
    </div>

    <!-- éŸ³ä¹æ’­æ”¾é¡µé¢ -->
    <div class="music-page" id="musicPage">
        <div id="particles-js"></div>
        <h1 class="music-title">2026å…ƒæ—¦è”æ¬¢ä¼š</h1>
        <h2 class="music-subtitle">ä¹å¹´çº§å…­ç­ æ­£å¼å¼€å§‹ï¼</h2>
    </div>

    <!-- å…¨å±iframeï¼ˆåµŒå…¥MVï¼‰ -->
    <iframe id="mvIframe" class="mv-iframe" src="" frameborder="0"></iframe>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="backgroundMusic" loop src="https://yzbjfpv.top/school/2026/music/start.mp3"></audio>

    <!-- ç²’å­ç‰¹æ•ˆï¼ˆå›½å†…CDNï¼‰ -->
    <script src="https://cdn.bootcdn.net/ajax/libs/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // ========== ç¬¬ä¸€æ­¥ï¼šCanvasåŠ¨æ€ç¯ç¬¼ï¼ˆä¿®å¤æ•™ç¨‹ä»£ç +å¢åŠ åŠ¨æ€æ•ˆæœï¼‰ ==========
        window.onload = function() {
            // åˆå§‹åŒ–Canvasç¯ç¬¼
            initLanternCanvas();
            // åˆå§‹åŒ–é¡µé¢é€»è¾‘
            initPageLogic();
        };

        // CanvasåŠ¨æ€ç¯ç¬¼æ ¸å¿ƒå‡½æ•°
        function initLanternCanvas() {
            const canvas = document.getElementById('lanternCanvas');
            const ctx = canvas.getContext('2d');
            
            // é€‚é…çª—å£å¤§å°
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // ä¿®å¤æ•™ç¨‹ä¸­çš„æ¤­åœ†ç»˜åˆ¶å‡½æ•°
            function ParamEllipse(context, x, y, a, b) {
                const step = (a > b) ? 1 / a : 1 / b;
                context.fillStyle = "#ff0000";
                context.beginPath();
                for (let i = 0; i < 2 * Math.PI; i += step) {
                    context.lineTo(x + a * Math.cos(i), y + b * Math.sin(i));
                }
                context.closePath();
                context.stroke();
                context.fill();
            }

            // æ¸å˜çŸ©å½¢ç»˜åˆ¶
            function FillRect(context, x, y, w, h, flag) {
                const grd = context.createLinearGradient(x + w/2, y, x + w/2, y + h);
                if (flag) {
                    grd.addColorStop(0, "yellow");
                    grd.addColorStop(1, "red");
                } else {
                    grd.addColorStop(0, "red");
                    grd.addColorStop(1, "yellow");
                }
                context.fillStyle = grd;
                context.fillRect(x, y, w, h);
            }

            // ç»˜åˆ¶çº¿æ¡
            function SetLine(ctx, x, y, x1, y1) {
                ctx.beginPath();
                ctx.strokeStyle = "yellow";
                ctx.lineWidth = 2;
                ctx.moveTo(x, y);
                ctx.lineTo(x1, y1);
                ctx.stroke();
                ctx.closePath();
            }

            // ç¯ç¬¼ç±»ï¼ˆå¢åŠ åŠ¨æ€å±æ€§ï¼‰
            class Lantern {
                constructor(x, y, sizeScale = 1, swingSpeed = 1, swingRange = 10) {
                    this.x = x;
                    this.y = y;
                    this.baseX = x; // åŸºç¡€Xåæ ‡ï¼ˆæ‘†åŠ¨åŸºå‡†ï¼‰
                    this.sizeScale = sizeScale;
                    this.swingSpeed = swingSpeed;
                    this.swingRange = swingRange;
                    this.angle = 0; // æ‘†åŠ¨è§’åº¦
                    this.brightness = 1; // äº®åº¦ï¼ˆå‘¼å¸æ•ˆæœï¼‰
                    this.brightnessSpeed = 0.02;
                    this.brightnessDir = 1; // äº®åº¦æ–¹å‘ï¼ˆ1=å¢åŠ ï¼Œ-1=å‡å°‘ï¼‰
                }

                // ç»˜åˆ¶å•ä¸ªç¯ç¬¼
                draw(ctx) {
                    // å°ºå¯¸ç¼©æ”¾
                    const pWidth = 120 * this.sizeScale;
                    const pHeigth = 80 * this.sizeScale;
                    const fWidth = 120 * this.sizeScale;
                    const fheight = 40 * this.sizeScale;
                    const lLen = fheight;
                    const lInterval = 8 * this.sizeScale;

                    // ä¿å­˜å½“å‰çŠ¶æ€
                    ctx.save();
                    // äº®åº¦è°ƒæ•´ï¼ˆå‘¼å¸æ•ˆæœï¼‰
                    ctx.globalAlpha = 0.8 + this.brightness * 0.2;
                    
                    // ç»˜åˆ¶ç¯ç¬¼ä¸»ä½“
                    ParamEllipse(ctx, this.x, this.y, pWidth, pHeigth);
                    FillRect(ctx, this.x - fWidth / 2, this.y - pHeigth - (fheight / 2), fWidth, fheight, true);
                    FillRect(ctx, this.x - fWidth / 2, this.y + pHeigth - (fheight / 2), fWidth, fheight, false);
                    
                    // ç»˜åˆ¶æµè‹
                    for (let i = 0; i < (fWidth / 8) + 1; i++) {
                        SetLine(ctx, 
                            this.x - fWidth / 2 + i * lInterval, 
                            this.y + pHeigth + fheight / 2, 
                            this.x - fWidth / 2 + i * lInterval, 
                            this.y + pHeigth + fheight / 2 + lLen
                        );
                    }

                    // æ¢å¤çŠ¶æ€
                    ctx.restore();
                }

                // æ›´æ–°ç¯ç¬¼åŠ¨æ€æ•ˆæœ
                update() {
                    // æ‘†åŠ¨åŠ¨ç”»
                    this.angle += 0.02 * this.swingSpeed;
                    this.x = this.baseX + Math.sin(this.angle) * this.swingRange;
                    
                    // å‘¼å¸æ•ˆæœ
                    this.brightness += this.brightnessSpeed * this.brightnessDir;
                    if (this.brightness > 1) {
                        this.brightness = 1;
                        this.brightnessDir = -1;
                    } else if (this.brightness < 0) {
                        this.brightness = 0;
                        this.brightnessDir = 1;
                    }
                }
            }

            // åˆ›å»ºå¤šä¸ªç¯ç¬¼ï¼ˆä¸åŒä½ç½®/å¤§å°/é€Ÿåº¦ï¼‰
            const lanterns = [
                new Lantern(canvas.width * 0.2, canvas.height * 0.3, 0.8, 0.8, 8),
                new Lantern(canvas.width * 0.8, canvas.height * 0.25, 1.0, 1.2, 12),
                new Lantern(canvas.width * 0.4, canvas.height * 0.45, 0.9, 0.9, 10),
                new Lantern(canvas.width * 0.7, canvas.height * 0.55, 1.1, 1.0, 11),
                new Lantern(canvas.width * 0.3, canvas.height * 0.65, 0.7, 1.1, 9)
            ];

            // åŠ¨ç”»å¾ªç¯
            function animate() {
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰ç¯ç¬¼
                lanterns.forEach(lantern => {
                    lantern.update();
                    lantern.draw(ctx);
                });

                requestAnimationFrame(animate);
            }

            // å¯åŠ¨åŠ¨ç”»
            animate();
        }

        // ========== ç¬¬äºŒæ­¥ï¼šé¡µé¢æ ¸å¿ƒé€»è¾‘ï¼ˆä¿®å¤å€’è®¡æ—¶+é¡µé¢åˆ‡æ¢ï¼‰ ==========
        function initPageLogic() {
            // æ ¸å¿ƒå…ƒç´ 
            const timeModal = document.getElementById('timeModal');
            const countdownPage = document.getElementById('countdownPage');
            const fastCountdown = document.getElementById('fastCountdown');
            const endCountdownPage = document.getElementById('endCountdownPage');
            const musicPage = document.getElementById('musicPage');
            const mvIframe = document.getElementById('mvIframe');
            const backgroundMusic = document.getElementById('backgroundMusic');
            
            // æ—¶é—´è®¾ç½®å…ƒç´ 
            const dateInput = document.getElementById('dateInput');
            const periodSelect = document.getElementById('periodSelect');
            const hourSelect = document.getElementById('hourSelect');
            const minuteSelect = document.getElementById('minuteSelect');
            const timeConfirmBtn = document.getElementById('timeConfirmBtn');
            
            // å€’è®¡æ—¶å…ƒç´ 
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');
            const fastCountNumber = document.getElementById('fastCountNumber');
            
            // å…¨å±€å˜é‡
            let targetTime = null;
            let countdownInterval = null;
            let isMVShowing = false;
            const MV_URL = 'https://yzbjfpv.top/school/2026/mv';
            // éŸ³é‡æ§åˆ¶
            let volumeInterval = null;
            const VOLUME_STEP = 0.01;
            // å€’è®¡æ—¶ç¿»ç‰Œå˜é‡
            let lastHours = '00', lastMinutes = '00', lastSeconds = '00';

            // åˆå§‹åŒ–æ—¶é—´é€‰æ‹©å™¨
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            dateInput.value = formattedDate;

            // ç¡®è®¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            timeConfirmBtn.addEventListener('click', function() {
                const selectedDate = dateInput.value || formattedDate;
                const period = periodSelect.value;
                const hourVal = hourSelect.value;
                const minuteVal = minuteSelect.value;

                // 24å°æ—¶åˆ¶è½¬æ¢
                let hour = parseInt(hourVal);
                if (period === 'ä¸‹åˆ' && hour < 12) hour += 12;
                else if (period === 'ä¸Šåˆ' && hour === 12) hour = 0;
                const minute = parseInt(minuteVal);

                // æ„å»ºç›®æ ‡æ—¶é—´
                targetTime = new Date(selectedDate);
                targetTime.setHours(hour);
                targetTime.setMinutes(minute);
                targetTime.setSeconds(0);

                // æ ¡éªŒ
                if (isNaN(targetTime.getTime())) {
                    alert('æ—¶é—´è®¾ç½®é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼');
                    return;
                }

                // æ˜¾ç¤ºå€’è®¡æ—¶
                timeModal.classList.add('hidden');
                countdownPage.classList.add('show');
                startCountdown();
            });

            // é‡æ„å€’è®¡æ—¶é€»è¾‘ï¼ˆä¿®å¤ç¿»ç‰Œé—®é¢˜ï¼‰
            function startCountdown() {
                if (countdownInterval) clearInterval(countdownInterval);
                updateCountdown();
                countdownInterval = setInterval(updateCountdown, 1000);
            }

            function updateCountdown() {
                const now = new Date();
                const diff = targetTime - now;
                
                // å€’è®¡æ—¶ç»“æŸ â†’ çº¯å‡€é¡µ
                if (diff <= 0) {
                    clearInterval(countdownInterval);
                    countdownPage.classList.remove('show');
                    endCountdownPage.classList.add('show');
                    return;
                }
                
                // è®¡ç®—æ—¶åˆ†ç§’ï¼ˆè¡¥é›¶ï¼‰
                const hours = Math.floor(diff / 3600000).toString().padStart(2, '0');
                const minutes = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
                const seconds = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
                
                // ç¿»ç‰ŒåŠ¨ç”»ï¼ˆä»…æ•°å€¼å˜åŒ–æ—¶è§¦å‘ï¼‰
                if (hours !== lastHours) {
                    hoursEl.textContent = hours;
                    hoursEl.classList.add('flip');
                    setTimeout(() => hoursEl.classList.remove('flip'), 600);
                    lastHours = hours;
                }
                if (minutes !== lastMinutes) {
                    minutesEl.textContent = minutes;
                    minutesEl.classList.add('flip');
                    setTimeout(() => minutesEl.classList.remove('flip'), 600);
                    lastMinutes = minutes;
                }
                if (seconds !== lastSeconds) {
                    secondsEl.textContent = seconds;
                    secondsEl.classList.add('flip');
                    setTimeout(() => secondsEl.classList.remove('flip'), 600);
                    lastSeconds = seconds;
                }
            }

            // å¿«é€Ÿå€’è®¡æ—¶
            function startFastCountdown() {
                countdownPage.classList.remove('show');
                fastCountdown.classList.add('show');
                
                let count = 3;
                fastCountNumber.textContent = count;
                
                const fastInterval = setInterval(() => {
                    count--;
                    if (count < 0) {
                        clearInterval(fastInterval);
                        fastCountdown.classList.remove('show');
                        endCountdownPage.classList.add('show');
                        return;
                    }
                    
                    fastCountNumber.textContent = count;
                    fastCountNumber.classList.add('animate__animated', 'animate__bounceIn', 'animate__rotateIn');
                    setTimeout(() => {
                        fastCountNumber.classList.remove('animate__animated', 'animate__bounceIn', 'animate__rotateIn');
                    }, 800);
                }, 1000);
            }

            // åˆå§‹åŒ–ç²’å­ç‰¹æ•ˆ
            function initParticles() {
                particlesJS('particles-js', {
                    "particles": {
                        "number": { "value": 250, "density": { "enable": true, "value_area": 800 } },
                        "color": { "value": "#FFD700" },
                        "shape": { "type": "circle" },
                        "opacity": { 
                            "value": 0.9, 
                            "anim": { "enable": true, "speed": 0.5, "opacity_min": 0.4 } 
                        },
                        "size": { 
                            "value": 8, 
                            "random": true, 
                            "anim": { "enable": true, "speed": 1, "size_min": 3 } 
                        },
                        "line_linked": { 
                            "enable": true, 
                            "distance": 150, 
                            "color": "#FFD700", 
                            "opacity": 0.8, 
                            "width": 2 
                        },
                        "move": { 
                            "enable": true, 
                            "speed": 6, 
                            "direction": "none", 
                            "random": true, 
                            "bounce": true 
                        }
                    },
                    "interactivity": {
                        "events": {
                            "onhover": { "enable": true, "mode": "grab" },
                            "onclick": { "enable": true, "mode": "push" },
                            "resize": true
                        }
                    },
                    "retina_detect": true
                });
            }

            // æŒ‰é”®é€»è¾‘
            document.addEventListener('keydown', (e) => {
                e.preventDefault();
                
                // ç©ºæ ¼é”®é€»è¾‘
                if (e.code === 'Space') {
                    // çº¯å‡€é¡µ â†’ éŸ³ä¹é¡µ
                    if (endCountdownPage.classList.contains('show')) {
                        endCountdownPage.classList.remove('show');
                        musicPage.classList.add('show');
                        initParticles();
                        backgroundMusic.play().catch(err => {
                            document.addEventListener('click', () => backgroundMusic.play(), { once: true });
                        });
                    }
                    // éŸ³ä¹é¡µ â†’ MVé¡µ
                    else if (musicPage.classList.contains('show') && !isMVShowing) {
                        backgroundMusic.pause();
                        isMVShowing = true;
                        // å¼ºåˆ¶åˆ·æ–°MVé¡µé¢
                        mvIframe.src = '';
                        setTimeout(() => {
                            mvIframe.src = MV_URL;
                        }, 100);
                        mvIframe.classList.add('show');
                    }
                    // å€’è®¡æ—¶é¡µ â†’ å¿«é€Ÿå€’è®¡æ—¶
                    else if (countdownPage.classList.contains('show') && !isMVShowing) {
                        clearInterval(countdownInterval);
                        startFastCountdown();
                    }
                }

                // A/aé”®ï¼šMV â†’ éŸ³ä¹é¡µ
                if (e.key.toLowerCase() === 'a' && isMVShowing) {
                    mvIframe.classList.remove('show');
                    isMVShowing = false;
                    musicPage.classList.add('show');
                    backgroundMusic.play().catch(err => {
                        document.addEventListener('click', () => backgroundMusic.play(), { once: true });
                    });
                }

                // éŸ³é‡æ§åˆ¶
                if (e.code === 'Minus' || e.code === 'NumpadSubtract') {
                    if (!volumeInterval) {
                        volumeInterval = setInterval(() => {
                            backgroundMusic.volume = Math.max(0, backgroundMusic.volume - VOLUME_STEP);
                        }, 50);
                    }
                }
                if (e.code === 'Equal' || e.code === 'NumpadAdd') {
                    if (!volumeInterval) {
                        volumeInterval = setInterval(() => {
                            backgroundMusic.volume = Math.min(1, backgroundMusic.volume + VOLUME_STEP);
                        }, 50);
                    }
                }
            });

            // æŒ‰é”®æ¾å¼€åœæ­¢éŸ³é‡
            document.addEventListener('keyup', (e) => {
                if (e.code === 'Minus' || e.code === 'NumpadSubtract' || 
                    e.code === 'Equal' || e.code === 'NumpadAdd') {
                    clearInterval(volumeInterval);
                    volumeInterval = null;
                }
            });

            // åˆå§‹åŒ–éŸ³é‡
            backgroundMusic.volume = 0.8;
        }
    </script>
</body>
</html>
